{"version":3,"sources":["webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/get-iterator.js","webpack:///./node_modules/core-js/modules/es6.string.iterator.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///src/pages/implementation/artifact-management.vue","webpack:///./src/pages/implementation/artifact-management.vue?96b5","webpack:///./src/pages/implementation/artifact-management.vue","webpack:///./src/pages/implementation/artifact-management.vue?43b7","webpack:///./src/pages/implementation/artifact-management.vue?7a97"],"names":["module","exports","$at","String","iterated","this","_t","_i","point","O","index","length","value","undefined","done","_arrayWithHoles","arr","_iterableToArrayLimit","i","_arr","_n","_d","_e","_s","next","push","err","_nonIterableRest","TypeError","_slicedToArray","anObject","get","getIterator","it","iterFn","call","data","packageCiType","statusOperations","systemDesignVersions","systemDesignVersion","ciTypesObj","ciTypeAttributeObj","ciTypes","treeData","treeLoading","loadingForSave","selectFile","filesTreeData","guid","currentPackage","packageId","isShowFilesModal","isShowTreeModal","treeModalOpt","currentTreeModal","tableLoading","tableData","tableColumns","pageInfo","pageSize","currentPage","total","activeTab","diffTabData","tabData","selectNode","attrsTableColomnOptions","computed","setUploadActionHeader","uploadToken","split","nowTab","find","_","title","result","methods","uploadPackagesSuccess","response","status","$Notice","error","desc","message","queryPackages","renderActionButton","selectSystemDesignVersion","getSystemDesignVersion","formatTreeData","array","map","name","level","children","expand","selectTreeNode","node","r_guid","pageChange","pageSizeChange","genFilesTreedata","currentDir","filesArray","forEach","targetNode","dir","formatChildrenData","files","Array","path","isDir","obj","render","expandNode","getFiles","rowClick","row","getTabDatas","diff_conf_file","changeStatus","showFilesModal","handleDelete","handleStatusChange","JSON","parse","stringify","diffFile","f","getKeys","showTreeModal","type","closeModal","onOk","key","join","closeTreeModal","checkboxChange","splice","tabChange","tabName","updateRoutine","routine","val","saveAttr","saveDiffConfigEnumCodes","code","created","fetchData","getAllCITypesByLayerWithAttr","getAllCiTypesByCatalog","getAllSystemEnumCodes","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","on","model","callback","$$v","expression","_l","version","fixed_date","saveConfigFiles","start_file","stop_file","deploy_file","item","staticRenderFns","injectStyle","context","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","content","locals","add","default"],"mappings":"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","file":"js/chunk-7ee114f6.69012931.js","sourcesContent":["require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","module.exports = require(\"core-js/library/fn/get-iterator\");","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","import _Array$isArray from \"../../core-js/array/is-array\";\nexport default function _arrayWithHoles(arr) {\n  if (_Array$isArray(arr)) return arr;\n}","import _getIterator from \"../../core-js/get-iterator\";\nexport default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = _getIterator(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","<template>\r\n  <Row class=\"artifact-management\">\r\n    <Col span=\"6\">\r\n      <Card>\r\n        <p slot=\"title\">系统设计版本</p>\r\n        <Select\r\n          @on-change=\"selectSystemDesignVersion\"\r\n          label-in-name\r\n          v-model=\"systemDesignVersion\"\r\n        >\r\n          <Option\r\n            v-for=\"version in systemDesignVersions\"\r\n            :value=\"version.guid || ''\"\r\n            :key=\"version.guid\"\r\n            >{{\r\n              version.fixed_date\r\n                ? `${version.name}[${version.fixed_date}]`\r\n                : version.name\r\n            }}</Option\r\n          >\r\n        </Select>\r\n      </Card>\r\n      <Card class=\"artifact-management-bottom-card\">\r\n        <p slot=\"title\">系统设计列表</p>\r\n        <div class=\"artifact-management-tree-body\">\r\n          <Tree :data=\"treeData\" @on-select-change=\"selectTreeNode\"></Tree>\r\n          <Spin size=\"large\" fix v-if=\"treeLoading\">\r\n            <Icon type=\"ios-loading\" size=\"24\" class=\"spin-icon-load\"></Icon>\r\n            <div>loading...</div>\r\n          </Spin>\r\n        </div>\r\n      </Card>\r\n    </Col>\r\n    <Col span=\"17\" offset=\"1\">\r\n      <Card v-if=\"guid\" class=\"artifact-management-top-card\">\r\n        <Upload\r\n          :action=\"`/artifact/unit-designs/${guid}/packages/upload`\"\r\n          :headers=\"setUploadActionHeader\"\r\n          :on-success=\"uploadPackagesSuccess\"\r\n          slot=\"title\"\r\n        >\r\n          <Button icon=\"ios-cloud-upload-outline\">上传新包</Button>\r\n        </Upload>\r\n        <SimpleTable\r\n          :loading=\"tableLoading\"\r\n          :columns=\"tableColumns\"\r\n          :data=\"tableData\"\r\n          :page=\"pageInfo\"\r\n          @pageChange=\"pageChange\"\r\n          @pageSizeChange=\"pageSizeChange\"\r\n          @rowClick=\"rowClick\"\r\n        ></SimpleTable>\r\n        <Modal\r\n          v-model=\"isShowFilesModal\"\r\n          title=\"脚本配置\"\r\n          okText=\"保存\"\r\n          :loading=\"loadingForSave\"\r\n          @on-ok=\"saveConfigFiles\"\r\n          @on-cancel=\"closeModal\"\r\n        >\r\n          <Card class=\"artifact-management-files-card\">\r\n            <div slot=\"title\">\r\n              <span>差异化文件</span>\r\n              <Button @click=\"() => showTreeModal(0)\" size=\"small\"\r\n                >选择文件</Button\r\n              >\r\n            </div>\r\n            <span>{{ currentPackage.diff_conf_file || \"未选择\" }}</span>\r\n          </Card>\r\n          <Card class=\"artifact-management-files-card\">\r\n            <div slot=\"title\">\r\n              <span>启动脚本</span>\r\n              <Button @click=\"() => showTreeModal(1)\" size=\"small\"\r\n                >选择文件</Button\r\n              >\r\n            </div>\r\n            <span>{{ currentPackage.start_file || \"未选择\" }}</span>\r\n          </Card>\r\n          <Card class=\"artifact-management-files-card\">\r\n            <div slot=\"title\">\r\n              <span>停止脚本</span>\r\n              <Button @click=\"() => showTreeModal(2)\" size=\"small\"\r\n                >选择文件</Button\r\n              >\r\n            </div>\r\n            <span>{{ currentPackage.stop_file || \"未选择\" }}</span>\r\n          </Card>\r\n          <Card class=\"artifact-management-files-card\">\r\n            <div slot=\"title\">\r\n              <span>部署脚本</span>\r\n              <Button @click=\"() => showTreeModal(3)\" size=\"small\"\r\n                >选择文件</Button\r\n              >\r\n            </div>\r\n            <span>{{ currentPackage.deploy_file || \"未选择\" }}</span>\r\n          </Card>\r\n        </Modal>\r\n        <Modal\r\n          v-model=\"isShowTreeModal\"\r\n          :title=\"currentTreeModal.title\"\r\n          @on-ok=\"onOk\"\r\n          @on-cancel=\"closeTreeModal\"\r\n        >\r\n          <RadioGroup v-model=\"selectFile\">\r\n            <Tree :data=\"filesTreeData\" @on-toggle-expand=\"expandNode\"></Tree>\r\n          </RadioGroup>\r\n        </Modal>\r\n      </Card>\r\n      <Card\r\n        v-if=\"tabData.length ? true : false\"\r\n        class=\"artifact-management-bottom-card artifact-management-top-card\"\r\n      >\r\n        <Tabs v-model=\"activeTab\" @on-click=\"tabChange\">\r\n          <TabPane\r\n            v-for=\"(item, index) in tabData\"\r\n            :label=\"item.title\"\r\n            :name=\"item.title\"\r\n            :key=\"index\"\r\n          >\r\n            <Table\r\n              :data=\"item.tableData || []\"\r\n              :columns=\"attrsTableColomnOptions\"\r\n            ></Table>\r\n          </TabPane>\r\n        </Tabs>\r\n      </Card>\r\n    </Col>\r\n  </Row>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getPackageCiTypeId,\r\n  getAllCITypesByLayerWithAttr,\r\n  getSystemDesignVersions,\r\n  getAllCiTypesByCatalog,\r\n  getSystemDesignVersion,\r\n  queryPackages,\r\n  deleteCiDatas,\r\n  operateCiState,\r\n  getFiles,\r\n  getKeys,\r\n  saveConfigFiles,\r\n  saveDiffConfigEnumCodes,\r\n  getDiffConfigEnumCodes,\r\n  getAllSystemEnumCodes\r\n} from \"@/api/server.js\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      packageCiType: 0,\r\n      statusOperations: [],\r\n      systemDesignVersions: [],\r\n      systemDesignVersion: \"\",\r\n      ciTypesObj: {},\r\n      ciTypeAttributeObj: {},\r\n      ciTypes: [],\r\n      treeData: [],\r\n      treeLoading: false,\r\n      loadingForSave: false,\r\n      selectFile: \"\",\r\n      filesTreeData: [],\r\n      guid: \"\",\r\n      currentPackage: {},\r\n      packageId: \"\",\r\n      isShowFilesModal: false,\r\n      isShowTreeModal: false,\r\n      treeModalOpt: [\r\n        {\r\n          title: \"选择差异化文件\",\r\n          key: \"diff_conf_file\",\r\n          inputType: \"checkbox\"\r\n        },\r\n        {\r\n          title: \"选择启动脚本\",\r\n          key: \"start_file\",\r\n          inputType: \"radio\"\r\n        },\r\n        {\r\n          title: \"选择停止脚本\",\r\n          key: \"stop_file\",\r\n          inputType: \"radio\"\r\n        },\r\n        {\r\n          title: \"选择部署脚本\",\r\n          key: \"deploy_file\",\r\n          inputType: \"radio\"\r\n        }\r\n      ],\r\n      currentTreeModal: {},\r\n      tableLoading: false,\r\n      tableData: [],\r\n      tableColumns: [\r\n        {\r\n          title: \"包名\",\r\n          key: \"name\"\r\n        },\r\n        {\r\n          title: \"上传时间\",\r\n          width: 150,\r\n          key: \"upload_time\"\r\n        },\r\n        {\r\n          title: \"MD5值\",\r\n          key: \"md5_value\"\r\n        },\r\n        {\r\n          title: \"上传人\",\r\n          key: \"updated_by\"\r\n        },\r\n        {\r\n          title: \"差异化文件\",\r\n          key: \"diff_conf_file\"\r\n        },\r\n        {\r\n          title: \"启动脚本\",\r\n          key: \"start_file\"\r\n        },\r\n        {\r\n          title: \"停止脚本\",\r\n          key: \"stop_file\"\r\n        },\r\n        {\r\n          title: \"部署脚本\",\r\n          key: \"deploy_file\"\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"state\",\r\n          width: 150,\r\n          render: (h, params) => {\r\n            return (\r\n              <div style=\"padding-top:5px\">\r\n                {this.renderActionButton(params)}\r\n              </div>\r\n            );\r\n          }\r\n        }\r\n      ],\r\n      pageInfo: {\r\n        pageSize: 5,\r\n        currentPage: 1,\r\n        total: 0\r\n      },\r\n      activeTab: \"\",\r\n      diffTabData: \"\",\r\n      tabData: [],\r\n      selectNode: [],\r\n      attrsTableColomnOptions: [\r\n        {\r\n          title: \"序号\",\r\n          key: \"index\",\r\n          width: 60\r\n        },\r\n        {\r\n          title: \"文件行号\",\r\n          key: \"line\"\r\n        },\r\n        {\r\n          title: \"properties-key\",\r\n          key: \"key\"\r\n        },\r\n        {\r\n          title: \"CMDB-ATTR\",\r\n          render: (h, params) => {\r\n            return params.row.attrInputValue ? (\r\n              <AttrInput\r\n                style=\"margin-top:5px;\"\r\n                allCiTypes={this.ciTypes}\r\n                rootCiType={15}\r\n                isReadOnly={true}\r\n                ciTypesObj={this.ciTypesObj}\r\n                ciTypeAttributeObj={this.ciTypeAttributeObj}\r\n                sourceData={params.row.attrInputValue}\r\n                onUpdateRoutine={val => this.updateRoutine(val, params.index)}\r\n              />\r\n            ) : (\r\n              <div style=\"align-items:center;display:flex;\">\r\n                <AttrInput\r\n                  style=\"margin-top:5px;width:calc(100% - 55px);\"\r\n                  allCiTypes={this.ciTypes}\r\n                  rootCiType={15}\r\n                  ciTypesObj={this.ciTypesObj}\r\n                  ciTypeAttributeObj={this.ciTypeAttributeObj}\r\n                  onUpdateRoutine={val => this.updateRoutine(val, params.index)}\r\n                />\r\n                <Button\r\n                  size=\"small\"\r\n                  type=\"primary\"\r\n                  style=\"margin-left:10px\"\r\n                  onClick={() => this.saveAttr(params.index)}\r\n                >\r\n                  保存\r\n                </Button>\r\n              </div>\r\n            );\r\n          }\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    setUploadActionHeader() {\r\n      let uploadToken = document.cookie\r\n        .split(\";\")\r\n        .find(i => i.indexOf(\"XSRF-TOKEN\") !== -1);\r\n      return {\r\n        \"X-XSRF-TOKEN\": uploadToken && uploadToken.split(\"=\")[1]\r\n      };\r\n    },\r\n    nowTab() {\r\n      let result = 0;\r\n      this.tabData.find((_, i) => {\r\n        if (_.title === this.activeTab) {\r\n          result = i;\r\n          return true;\r\n        }\r\n      });\r\n      return result;\r\n    }\r\n  },\r\n  methods: {\r\n    uploadPackagesSuccess(response, file, fileList) {\r\n      if (response.status === \"ERROR\") {\r\n        this.$Notice.error({\r\n          title: \"Error\",\r\n          desc: response.message || \"\"\r\n        });\r\n      } else {\r\n        this.queryPackages();\r\n      }\r\n    },\r\n\r\n    renderActionButton(params) {\r\n      const row = params.row;\r\n      return this.statusOperations\r\n        .filter(_ => row.nextOperations.indexOf(_.type) >= 0)\r\n        .map(_ => {\r\n          return (\r\n            <Button\r\n              {...{ props: { ..._.props } }}\r\n              style=\"margin-right:5px;margin-bottom:5px;\"\r\n              onClick={() => this.changeStatus(row, _.type)}\r\n            >\r\n              {_.label}\r\n            </Button>\r\n          );\r\n        });\r\n    },\r\n    async fetchData() {\r\n      const [sysData, packageCiType] = await Promise.all([\r\n        getSystemDesignVersions(),\r\n        getPackageCiTypeId()\r\n      ]);\r\n      if (sysData.status === \"OK\" && sysData.data.contents instanceof Array) {\r\n        this.systemDesignVersions = sysData.data.contents.map(_ => _.data);\r\n      }\r\n      if (packageCiType.status === \"OK\") {\r\n        this.packageCiType = packageCiType.data;\r\n      }\r\n    },\r\n    async getAllCITypesByLayerWithAttr() {\r\n      let { status, data, message } = await getAllCITypesByLayerWithAttr([\r\n        \"notCreated\",\r\n        \"created\",\r\n        \"dirty\",\r\n        \"decommissioned\"\r\n      ]);\r\n      if (status === \"OK\") {\r\n        let ciTypes = {};\r\n        let ciTypeAttrs = {};\r\n        data.forEach(layer => {\r\n          if (layer.ciTypes instanceof Array) {\r\n            layer.ciTypes.forEach(citype => {\r\n              ciTypes[citype.ciTypeId] = citype;\r\n              if (citype.attributes instanceof Array) {\r\n                citype.attributes.forEach(citypeAttr => {\r\n                  ciTypeAttrs[citypeAttr.ciTypeAttrId] = citypeAttr;\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n        this.ciTypesObj = ciTypes;\r\n        this.ciTypeAttributeObj = ciTypeAttrs;\r\n      }\r\n    },\r\n    async getAllCiTypesByCatalog() {\r\n      let { status, data, message } = await getAllCiTypesByCatalog();\r\n      if (status === \"OK\") {\r\n        this.ciTypes = data;\r\n      }\r\n    },\r\n    async getSystemDesignVersion(guid) {\r\n      this.treeLoading = true;\r\n      let { status, data, message } = await getSystemDesignVersion(guid);\r\n      if (status === \"OK\") {\r\n        this.treeData = this.formatTreeData(data, 1);\r\n        this.treeLoading = false;\r\n      }\r\n    },\r\n    async queryPackages() {\r\n      this.tableLoading = true;\r\n      let { status, data, message } = await queryPackages(this.guid, {\r\n        sorting: {\r\n          asc: false,\r\n          field: \"upload_time\"\r\n        },\r\n        paging: true,\r\n        pageable: {\r\n          pageSize: this.pageInfo.pageSize,\r\n          startIndex: (this.pageInfo.currentPage - 1) * this.pageInfo.pageSize\r\n        }\r\n      });\r\n      if (status === \"OK\") {\r\n        this.tableLoading = false;\r\n        this.tableData = data.contents.map(_ => {\r\n          return {\r\n            ..._.data,\r\n            nextOperations: _.meta.nextOperations || []\r\n          };\r\n        });\r\n        const { pageSize, totalRows: total } = data.pageInfo;\r\n        const currentPage = this.pageInfo.currentPage;\r\n        this.pageInfo = { currentPage, pageSize, total };\r\n      }\r\n    },\r\n    async getFiles(packageId, currentDir) {\r\n      this.packageId = packageId;\r\n      let { status, data, message } = await getFiles(this.guid, packageId, {\r\n        currentDir\r\n      });\r\n      if (status === \"OK\") {\r\n        this.isShowFilesModal = true;\r\n        this.genFilesTreedata({ files: data.outputs[0].files, currentDir });\r\n      }\r\n    },\r\n    async getKeys(options) {\r\n      if (!options) return;\r\n      let { status, data, message } = await getKeys(this.guid, this.packageId, {\r\n        filePath: options.path\r\n      });\r\n      if (status === \"OK\") {\r\n        const diffConfigEnums = await getDiffConfigEnumCodes();\r\n        if (diffConfigEnums.status === \"OK\") {\r\n          const result = data.outputs[0].config_key_infos.map((_, i) => {\r\n            _.index = i + 1;\r\n            const found = diffConfigEnums.data.find(\r\n              item => item.value === _.key\r\n            );\r\n            if (found) {\r\n              _.attrInputValue = found.code;\r\n            }\r\n            return _;\r\n          });\r\n          this.$set(options, \"tableData\", result);\r\n        }\r\n      }\r\n    },\r\n    async saveConfigFiles() {\r\n      this.loadingForSave = true;\r\n      const obj = {\r\n        configFilesWithPath: this.diffTabData.split(\"|\"),\r\n        startFile: this.currentPackage.start_file || \"\",\r\n        stopFile: this.currentPackage.stop_file || \"\",\r\n        deployFile: this.currentPackage.deploy_file || \"\"\r\n      };\r\n      let { status, data, message } = await saveConfigFiles(\r\n        this.guid,\r\n        this.packageId,\r\n        obj\r\n      );\r\n      if (status === \"OK\") {\r\n        this.loadingForSave = false;\r\n        this.$Notice.success({\r\n          title: \"保存成功\"\r\n        });\r\n      }\r\n      this.queryPackages();\r\n      this.getTabDatas(this.diffTabData);\r\n    },\r\n    async saveDiffConfigEnumCodes(obj) {\r\n      let { status, data, message } = await saveDiffConfigEnumCodes(obj);\r\n      if (status === \"OK\") {\r\n        this.$Notice.success({\r\n          title: \"保存成功\"\r\n        });\r\n        this.getKeys(this.tabData[this.nowTab]);\r\n      }\r\n    },\r\n    selectSystemDesignVersion(guid) {\r\n      this.getSystemDesignVersion(guid);\r\n    },\r\n    formatTreeData(array, level) {\r\n      return array.map(_ => {\r\n        _.title = _.data.name;\r\n        _.level = level;\r\n        if (_.children && _.children.length) {\r\n          _.expand = true;\r\n          _.children = this.formatTreeData(_.children, level + 1);\r\n        }\r\n        return _;\r\n      });\r\n    },\r\n    selectTreeNode(node) {\r\n      if (node.length && node[0].level === 3) {\r\n        this.guid = node[0].data.r_guid;\r\n        this.queryPackages();\r\n        this.tabData = [];\r\n      }\r\n    },\r\n    pageChange(currentPage) {\r\n      this.pageInfo.currentPage = currentPage;\r\n      this.queryPackages();\r\n    },\r\n    pageSizeChange(pageSize) {\r\n      this.pageInfo.pageSize = pageSize;\r\n      this.queryPackages();\r\n    },\r\n    genFilesTreedata(data) {\r\n      const { files, currentDir } = data;\r\n      if (currentDir) {\r\n        const filesArray = currentDir.split(\"/\");\r\n        let targetNode = this.filesTreeData;\r\n        filesArray.forEach((dir, index) => {\r\n          if (index) {\r\n            targetNode = targetNode.children;\r\n          }\r\n          targetNode.find(_ => {\r\n            if (dir === _.title) {\r\n              targetNode = _;\r\n              return true;\r\n            }\r\n          });\r\n        });\r\n        targetNode.children = this.formatChildrenData({\r\n          files,\r\n          currentDir,\r\n          level: targetNode.level + 1\r\n        });\r\n      } else {\r\n        this.filesTreeData = this.formatChildrenData({\r\n          files,\r\n          currentDir,\r\n          level: 1\r\n        });\r\n      }\r\n    },\r\n    formatChildrenData(val) {\r\n      const { files, currentDir, level } = val;\r\n      if (!(files instanceof Array)) {\r\n        return;\r\n      }\r\n      const tagName = this.currentTreeModal.inputType;\r\n      return files.map(_ => {\r\n        let obj = {\r\n          title: _.name,\r\n          path: currentDir ? `${currentDir}/${_.name}` : _.name,\r\n          level: level\r\n        };\r\n        if (_.isDir) {\r\n          obj.children = [{}];\r\n        } else {\r\n          obj.render = (h, params) => {\r\n            return this.currentTreeModal.inputType === \"checkbox\" ? (\r\n              <Checkbox\r\n                on-on-change={value => this.checkboxChange(value, params.data)}\r\n              >\r\n                <span>{params.data.title}</span>\r\n              </Checkbox>\r\n            ) : (\r\n              <Radio label={params.data.path}>\r\n                <span>{params.data.title}</span>\r\n              </Radio>\r\n            );\r\n          };\r\n        }\r\n        return obj;\r\n      });\r\n    },\r\n    expandNode(node) {\r\n      if (node.expand && !node.children[0].title) {\r\n        this.getFiles(this.packageId, node.path);\r\n      }\r\n    },\r\n    rowClick(row) {\r\n      this.packageId = row.guid;\r\n      this.getTabDatas(row.diff_conf_file);\r\n    },\r\n    changeStatus(row, status) {\r\n      switch (status) {\r\n        case \"update\":\r\n          this.showFilesModal(row);\r\n          break;\r\n        case \"delete\":\r\n          this.handleDelete(row, status);\r\n          break;\r\n        default:\r\n          this.handleStatusChange(row, status);\r\n          break;\r\n      }\r\n    },\r\n    async handleDelete(row) {\r\n      this.$Modal.confirm({\r\n        title: \"确认删除？\",\r\n        \"z-index\": 1000000,\r\n        onOk: async () => {\r\n          const { status, data, message } = await deleteCiDatas({\r\n            id: this.packageCiType,\r\n            deleteData: [row.guid]\r\n          });\r\n          if (status === \"OK\") {\r\n            this.$Notice.success({\r\n              title: \"Delete data Success\",\r\n              desc: message\r\n            });\r\n            this.queryPackages();\r\n          }\r\n        }\r\n      });\r\n    },\r\n    async handleStatusChange(row, state) {\r\n      const { data, status, message } = await operateCiState(\r\n        this.packageCiType,\r\n        row.guid,\r\n        state\r\n      );\r\n      if (status === \"OK\") {\r\n        this.$Notice.success({\r\n          title: state,\r\n          desc: message\r\n        });\r\n        this.queryPackages();\r\n      }\r\n    },\r\n    showFilesModal(row) {\r\n      this.tabData = [];\r\n      this.currentPackage = JSON.parse(JSON.stringify(row));\r\n      this.packageId = this.currentPackage.guid;\r\n      this.diffTabData = row.diff_conf_file || \"\";\r\n      this.isShowFilesModal = true;\r\n    },\r\n\r\n    getTabDatas(diffFile) {\r\n      if (diffFile) {\r\n        const files = diffFile.split(\"|\");\r\n        this.tabData = files.map(_ => {\r\n          const f = _.split(\"/\");\r\n          return {\r\n            path: _,\r\n            title: f[f.length - 1]\r\n          };\r\n        });\r\n        this.activeTab = this.tabData.length ? this.tabData[0].title : \"\";\r\n        this.getKeys(this.tabData[0]);\r\n      } else {\r\n        this.tabData = [];\r\n      }\r\n    },\r\n    showTreeModal(type) {\r\n      this.currentTreeModal = this.treeModalOpt[type];\r\n      if (!this.filesTreeData.length)\r\n        this.getFiles(this.currentPackage.guid, \"\");\r\n      this.isShowTreeModal = true;\r\n    },\r\n    closeModal() {\r\n      this.currentPackage = {};\r\n    },\r\n    onOk() {\r\n      if (this.currentTreeModal.key === \"diff_conf_file\") {\r\n        this.diffTabData = \"\";\r\n        let files = [];\r\n        this.selectNode.forEach(_ => {\r\n          files.push(\"/\" + _.path);\r\n        });\r\n        this.diffTabData = files.join(\"|\");\r\n        this.currentPackage.diff_conf_file = files.join(\"|\");\r\n        this.selectNode = [];\r\n        this.filesTreeData = [];\r\n      } else {\r\n        this.currentPackage[this.currentTreeModal.key] = \"/\" + this.selectFile;\r\n      }\r\n    },\r\n    closeTreeModal() {\r\n      this.selectNode = [];\r\n      this.filesTreeData = [];\r\n    },\r\n    checkboxChange(value, data) {\r\n      if (value) {\r\n        this.selectNode.push(data);\r\n      } else {\r\n        let i = 0;\r\n        this.selectNode.find((_, index) => {\r\n          if (_.path === data.path) {\r\n            i = index;\r\n            return true;\r\n          }\r\n        });\r\n        this.selectNode.splice(i, 1);\r\n      }\r\n    },\r\n    tabChange(tabName) {\r\n      this.tabData.find(_ => {\r\n        if (_.title === tabName && !(_.tableData instanceof Array)) {\r\n          this.getKeys(_);\r\n          return true;\r\n        }\r\n      });\r\n    },\r\n    updateRoutine(val, row) {\r\n      this.tabData[this.nowTab].tableData[row].routine = JSON.stringify(val);\r\n    },\r\n    saveAttr(row) {\r\n      this.saveDiffConfigEnumCodes({\r\n        value: this.tabData[this.nowTab].tableData[row].key,\r\n        code: this.tabData[this.nowTab].tableData[row].routine\r\n      });\r\n    },\r\n    async getAllSystemEnumCodes() {\r\n      const { status, data, message } = await getAllSystemEnumCodes({\r\n        filters: [\r\n          {\r\n            name: \"cat.catName\",\r\n            operator: \"eq\",\r\n            value: \"state_transition_operation\"\r\n          }\r\n        ],\r\n        paging: false\r\n      });\r\n      if (status === \"OK\" && data.contents instanceof Array) {\r\n        const buttonTypes = {\r\n          confirm: \"info\",\r\n          delete: \"error\",\r\n          discard: \"warning\",\r\n          update: \"primary\"\r\n        };\r\n        this.statusOperations = data.contents\r\n          .filter(\r\n            _ =>\r\n              _.code === \"confirm\" ||\r\n              _.code === \"delete\" ||\r\n              _.code === \"discard\" ||\r\n              _.code === \"update\"\r\n          )\r\n          .map(_ => {\r\n            return {\r\n              type: _.code,\r\n              label: _.code !== \"update\" ? _.value : \"配置\",\r\n              props: {\r\n                type: buttonTypes[_.code] || \"info\",\r\n                size: \"small\"\r\n              },\r\n              actionType: _.code\r\n            };\r\n          });\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData();\r\n    this.getAllCITypesByLayerWithAttr();\r\n    this.getAllCiTypesByCatalog();\r\n    this.getAllSystemEnumCodes();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.artifact-management {\r\n  padding: 20px;\r\n\r\n  &-top-card {\r\n    padding-bottom: 40px;\r\n  }\r\n\r\n  &-bottom-card {\r\n    margin-top: 30px;\r\n  }\r\n\r\n  &-tree-body {\r\n    position: relative;\r\n  }\r\n\r\n  &-save-button {\r\n    float: right;\r\n    margin-top: 10px;\r\n  }\r\n\r\n  &-files-card {\r\n    margin-top: 10px;\r\n\r\n    &:first-of-type {\r\n      margin-top: 0;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Row',{staticClass:\"artifact-management\"},[_c('Col',{attrs:{\"span\":\"6\"}},[_c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"系统设计版本\")]),_vm._v(\" \"),_c('Select',{attrs:{\"label-in-name\":\"\"},on:{\"on-change\":_vm.selectSystemDesignVersion},model:{value:(_vm.systemDesignVersion),callback:function ($$v) {_vm.systemDesignVersion=$$v},expression:\"systemDesignVersion\"}},_vm._l((_vm.systemDesignVersions),function(version){return _c('Option',{key:version.guid,attrs:{\"value\":version.guid || ''}},[_vm._v(_vm._s(version.fixed_date\n              ? ((version.name) + \"[\" + (version.fixed_date) + \"]\")\n              : version.name))])}),1)],1),_vm._v(\" \"),_c('Card',{staticClass:\"artifact-management-bottom-card\"},[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"系统设计列表\")]),_vm._v(\" \"),_c('div',{staticClass:\"artifact-management-tree-body\"},[_c('Tree',{attrs:{\"data\":_vm.treeData},on:{\"on-select-change\":_vm.selectTreeNode}}),_vm._v(\" \"),(_vm.treeLoading)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}},[_c('Icon',{staticClass:\"spin-icon-load\",attrs:{\"type\":\"ios-loading\",\"size\":\"24\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"loading...\")])],1):_vm._e()],1)])],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"17\",\"offset\":\"1\"}},[(_vm.guid)?_c('Card',{staticClass:\"artifact-management-top-card\"},[_c('Upload',{attrs:{\"slot\":\"title\",\"action\":(\"/artifact/unit-designs/\" + _vm.guid + \"/packages/upload\"),\"headers\":_vm.setUploadActionHeader,\"on-success\":_vm.uploadPackagesSuccess},slot:\"title\"},[_c('Button',{attrs:{\"icon\":\"ios-cloud-upload-outline\"}},[_vm._v(\"上传新包\")])],1),_vm._v(\" \"),_c('SimpleTable',{attrs:{\"loading\":_vm.tableLoading,\"columns\":_vm.tableColumns,\"data\":_vm.tableData,\"page\":_vm.pageInfo},on:{\"pageChange\":_vm.pageChange,\"pageSizeChange\":_vm.pageSizeChange,\"rowClick\":_vm.rowClick}}),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"脚本配置\",\"okText\":\"保存\",\"loading\":_vm.loadingForSave},on:{\"on-ok\":_vm.saveConfigFiles,\"on-cancel\":_vm.closeModal},model:{value:(_vm.isShowFilesModal),callback:function ($$v) {_vm.isShowFilesModal=$$v},expression:\"isShowFilesModal\"}},[_c('Card',{staticClass:\"artifact-management-files-card\"},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',[_vm._v(\"差异化文件\")]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\"},on:{\"click\":function () { return _vm.showTreeModal(0); }}},[_vm._v(\"选择文件\")])],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.currentPackage.diff_conf_file || \"未选择\"))])]),_vm._v(\" \"),_c('Card',{staticClass:\"artifact-management-files-card\"},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',[_vm._v(\"启动脚本\")]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\"},on:{\"click\":function () { return _vm.showTreeModal(1); }}},[_vm._v(\"选择文件\")])],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.currentPackage.start_file || \"未选择\"))])]),_vm._v(\" \"),_c('Card',{staticClass:\"artifact-management-files-card\"},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',[_vm._v(\"停止脚本\")]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\"},on:{\"click\":function () { return _vm.showTreeModal(2); }}},[_vm._v(\"选择文件\")])],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.currentPackage.stop_file || \"未选择\"))])]),_vm._v(\" \"),_c('Card',{staticClass:\"artifact-management-files-card\"},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',[_vm._v(\"部署脚本\")]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\"},on:{\"click\":function () { return _vm.showTreeModal(3); }}},[_vm._v(\"选择文件\")])],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.currentPackage.deploy_file || \"未选择\"))])])],1),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":_vm.currentTreeModal.title},on:{\"on-ok\":_vm.onOk,\"on-cancel\":_vm.closeTreeModal},model:{value:(_vm.isShowTreeModal),callback:function ($$v) {_vm.isShowTreeModal=$$v},expression:\"isShowTreeModal\"}},[_c('RadioGroup',{model:{value:(_vm.selectFile),callback:function ($$v) {_vm.selectFile=$$v},expression:\"selectFile\"}},[_c('Tree',{attrs:{\"data\":_vm.filesTreeData},on:{\"on-toggle-expand\":_vm.expandNode}})],1)],1)],1):_vm._e(),_vm._v(\" \"),(_vm.tabData.length ? true : false)?_c('Card',{staticClass:\"artifact-management-bottom-card artifact-management-top-card\"},[_c('Tabs',{on:{\"on-click\":_vm.tabChange},model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},_vm._l((_vm.tabData),function(item,index){return _c('TabPane',{key:index,attrs:{\"label\":item.title,\"name\":item.title}},[_c('Table',{attrs:{\"data\":item.tableData || [],\"columns\":_vm.attrsTableColomnOptions}})],1)}),1)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","function injectStyle (context) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4fa35444\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!sass-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./artifact-management.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./artifact-management.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./artifact-management.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4fa35444\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./artifact-management.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4fa35444\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4fa35444\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./artifact-management.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-loader/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0b6d899b\", content, true, {});","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".artifact-management[data-v-4fa35444]{padding:20px}.artifact-management-top-card[data-v-4fa35444]{padding-bottom:40px}.artifact-management-bottom-card[data-v-4fa35444]{margin-top:30px}.artifact-management-tree-body[data-v-4fa35444]{position:relative}.artifact-management-save-button[data-v-4fa35444]{float:right;margin-top:10px}.artifact-management-files-card[data-v-4fa35444]{margin-top:10px}.artifact-management-files-card[data-v-4fa35444]:first-of-type{margin-top:0}\", \"\"]);\n\n// exports\n"],"sourceRoot":""}