{"version":3,"sources":["webpack:///./src/pages/admin/enums.vue?db8a","webpack:///./src/pages/admin/enums.vue?86cb","webpack:///./src/pages/util/format.js","webpack:///src/pages/admin/enums.vue","webpack:///./src/pages/admin/enums.vue?41f0","webpack:///./src/pages/admin/enums.vue"],"names":["exports","module","push","i","content","locals","add","default","formatData","data","exportData","map","_","index","weTableForm","forEach","value","key_name","outerActions","innerActions","showCheckbox","tableData","seachFilters","tableColumns","pagination","pageSize","currentPage","total","payload","filters","pageable","startIndex","paging","sorting","asc","field","refResources","ascOptions","seletedRows","props","catId","watch","handler","this","queryData","val","getGroupList","immediate","beforeRouteLeave","$destroy","next","methods","pageChange","current","pageSizeChange","size","sortHandler","order","key","handleSubmit","setNewAddedRow","$refs","table","v","getAsyncOptions","rows","setTableData","disable","actionFun","type","exportHandler","addHandler","editHandler","saveHandler","deleteHandler","cancelHandler","rowCancelHandler","weTableRowId","setAllRowsUneditable","setCheckoutStatus","inputType","emptyRowData","inputKey","Date","getTime","unshift","$nextTick","disabled","actionType","swapRowEditable","$Modal","confirm","title","onOk","onCancel","document","querySelector","click","onSelectedRowsChange","length","checkoutBoxdisable","setActionsParams","routerFlag","created","shift","getEnumNames","getEnumsStatus","mounted","render","_vm","_h","$createElement","_c","_self","ref","attrs","on","staticRenderFns","injectStyle","context","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component"],"mappings":"qGAAAA,EAAUC,EAAOD,QAAU,EAAQ,OAAR,EAA4D,GAKvFA,EAAQE,KAAK,CAACD,EAAOE,EAAI,GAAI,M,qBCF7B,IAAIC,EAAU,EAAQ,QACA,kBAAZA,IAAsBA,EAAU,CAAC,CAACH,EAAOE,EAAIC,EAAS,MAC7DA,EAAQC,SAAQJ,EAAOD,QAAUI,EAAQC,QAE5C,IAAIC,EAAM,EAAQ,QAA0FC,QAC/FD,EAAI,WAAYF,GAAS,EAAM,K,srBCRrC,IAAMI,EAAa,SAAAC,GACxB,IAAIC,EAAa,GAkBjB,OAjBAA,EAAaD,EAAKE,IAAI,SAACC,EAAGC,GACxB,YACKD,EADL,CAEEE,YAAa,EAAF,GAAOF,OAItBF,EAAWK,QAAQ,SAAAH,GACjB,IAAK,IAAIT,KAAKS,EAAE,eAEmB,WAA/B,eAAOA,EAAE,eAAeT,KACA,OAAxBS,EAAE,eAAeT,KAEjBS,EAAE,eAAeT,GAAKS,EAAET,GAAGa,OAASJ,EAAET,GAAGc,YAIxCP,EAAWC,IAAI,SAAAC,GAAC,OAAIA,EAAEE,gB,uuBCkB/B,OACEL,KADF,WAEI,MAAO,CACLS,aAAN,OACMC,aAAN,OACMC,cAAc,EACdC,UAAW,GACXC,aAAc,GACdC,aAAc,CACpB,CACQ,MAAR,OACQ,IAAR,UACQ,SAAR,QACQ,YAAR,EACQ,aAAR,EACQ,UAAR,WACQ,SAAR,eACQ,WAAR,EACQ,UAAR,SACQ,YAAR,UACQ,QAAR,IAEA,CACQ,MAAR,MACQ,IAAR,OACQ,SAAR,OACQ,YAAR,EACQ,aAAR,EACQ,UAAR,QACQ,UAAR,OACQ,YAAR,QAEA,CACQ,MAAR,MACQ,IAAR,QACQ,SAAR,QACQ,YAAR,EACQ,aAAR,EACQ,UAAR,QACQ,UAAR,OACQ,YAAR,SAEA,CACQ,MAAR,OACQ,IAAR,cACQ,SAAR,0BACQ,YAAR,EACQ,aAAR,EACQ,UAAR,QACQ,WAAR,EACQ,UAAR,OACQ,YAAR,eAEA,CACQ,MAAR,MACQ,IAAR,cACQ,SAAR,cACQ,YAAR,EACQ,aAAR,EACQ,UAAR,WACQ,UAAR,SACQ,YAAR,cACQ,UAAR,SAEA,CACQ,MAAR,KACQ,IAAR,SACQ,SAAR,SACQ,YAAR,EACQ,aAAR,EACQ,UAAR,WACQ,UAAR,SACQ,YAAR,SACQ,QAAR,KAGMC,WAAY,CACVC,SAAU,GACVC,YAAa,EACbC,MAAO,GAETC,QAAS,CACPC,QAAS,GACTC,SAAU,CACRL,SAAU,GACVM,WAAY,GAEdC,QAAQ,EACRC,QAAS,CACPC,KAAK,EACLC,MAAO,IAETC,aAAc,CAAC,QAEjBC,WAAY,GACZC,YAAa,KAGjBC,MAAO,CACLC,MAAO,IAETC,MAAO,CACLD,MAAO,CACLE,QADN,SACA,GACQC,KAAKC,YACDC,GACFF,KAAKG,aAAaD,IAGtBE,WAAW,IAGfC,iBAhHF,SAgHA,OACIL,KAAKM,WACLC,KAEFC,QAAS,CACPC,WADJ,SACA,GACMT,KAAKnB,WAAWE,YAAc2B,EAC9BV,KAAKC,aAEPU,eALJ,SAKA,GACMX,KAAKnB,WAAWC,SAAW8B,EAC3BZ,KAAKC,aAEPY,YATJ,SASA,GACMb,KAAKf,QAAQK,QAAU,CACrBC,IAAoB,QAAfzB,EAAKgD,MACVtB,MAAO1B,EAAKiD,KAEdf,KAAKC,aAEPe,aAhBJ,SAgBA,GACMhB,KAAKf,QAAQC,QAAUpB,EACvBkC,KAAKnB,WAAWE,YAAc,EAC9BiB,KAAKC,aAEPgB,eArBJ,SAqBA,OACMjB,KAAKkB,MAAMC,MAAMrD,KAAKI,GAAO6C,GAAOK,GAEtC,aAxBJ,mEAwBA,GAxBA,gGAyBA,EAzBA,iCA0BA,mBA1BA,gBA0BA,EA1BA,EA0BA,OA1BA,EA0BA,OA1BA,EA0BA,QACA,KACA,WACA,oBACA,OACA,eACA,kBAIA,+BApCA,QAsCA,qCAtCA,wGAwCIC,gBAxCJ,SAwCA,gBACMC,EAAKlD,QAAL,WAAN,4IACA,kCACA,wBAFA,4FAAM,IAKA4B,KAAKkB,MAAMC,MAAMI,aAAaC,IAEhC,UAhDJ,oKAiDA,wDACA,kCACA,wDACA,gBACA,iEACA,EACA,mBAEA,2BACA,aACA,cACA,oBAKA,8BAjEA,gCAkEA,6BAlEA,2DAmEA,6BAnEA,mCAgEA,EAhEA,EAgEA,OAhEA,EAgEA,UAhEA,EAgEA,KAIA,WACA,2CACA,0CACA,YACA,EADA,GAEA,MAFA,CAGA,YACA,kCACA,OACA,qCACA,OACA,uCA/EA,uGAoFI,aApFJ,kKAsFA,8BAtFA,gCAuFA,kBAvFA,yDAwFA,kBAxFA,iCAqFA,EArFA,EAqFA,OArFA,EAqFA,UArFA,EAqFA,KAIA,WACA,+CAEA,OACA,cACA,oBA9FA,uGAmGI,eAnGJ,+KAoGA,kBApGA,gBAoGA,EApGA,EAoGA,OApGA,EAoGA,UApGA,EAoGA,KACA,WACA,4DACA,YACA,OACA,QACA,YA1GA,sGAiHIC,UAjHJ,SAiHA,KACM,OAAQC,GACN,IAAK,SACH1B,KAAK2B,gBACL,MACF,IAAK,MACH3B,KAAK4B,aACL,MACF,IAAK,OACH5B,KAAK6B,cACL,MACF,IAAK,OACH7B,KAAK8B,YAAYhE,GACjB,MACF,IAAK,SACHkC,KAAK+B,cAAcjE,GACnB,MACF,IAAK,SACHkC,KAAKgC,gBACL,MACF,IAAK,cACHhC,KAAKkB,MAAMC,MAAMc,iBAAiBnE,EAAKoE,cACvC,MACF,QACE,QAGNF,cA5IJ,WA6IMhC,KAAKkB,MAAMC,MAAMgB,uBACjBnC,KAAKkB,MAAMC,MAAMiB,oBACjBpC,KAAKzB,cACX,sCACQ,EAAR,iBACA,sBACA,yBACA,4BAIIqD,WAxJJ,WAwJA,WACA,KACM5B,KAAKpB,aAAaR,QAAQ,SAAhC,GAC4B,gBAAhBH,EAAEoE,WAA+C,aAAhBpE,EAAEoE,UACrCC,EAAarE,EAAEsE,UAAY,GAE3BD,EAAarE,EAAEsE,UAAY,KAG/BD,EAAa,kBAAmB,EAChCA,EAAa,kBAAmB,EAChCA,EAAa,iBAAkB,IAAIE,MAAOC,UAC1CH,EAAa,SAAWtC,KAAKH,MAAQG,KAAKH,MAAQ,GAClDG,KAAKtB,UAAUgE,QAAQJ,GACvBtC,KAAK2C,UAAU,WACb,EAAR,0CACQ,EAAR,oCAEM3C,KAAKzB,aAAaH,QAAQ,SAAhC,GACQH,EAAE2B,MAAMgD,SAA4B,QAAjB3E,EAAE4E,cAGzBhB,YA9KJ,WA8KA,WACM7B,KAAKkB,MAAMC,MAAM2B,iBAAgB,GACjC9C,KAAKzB,aAAaH,QAAQ,SAAhC,GAC6B,SAAjBH,EAAE4E,aACJ5E,EAAE2B,MAAMgD,UAAW,KAGvB5C,KAAK2C,UAAU,WACb,EAAR,qCAGIZ,cAzLJ,SAyLA,cACM/B,KAAK+C,OAAOC,QAAQ,CAClBC,MAAO,QACP,UAAW,IACXC,KAAM,WAAd,6JACA,sCADA,SAEA,kBAFA,gBAEA,EAFA,EAEA,SAFA,EAEA,QAFA,EAEA,KACA,WACA,mBACA,4BACA,SAEA,mCACA,iBACA,uBACA,uBACA,0BAEA,eAdA,8FAAc,GAiBNC,SAAU,eAEZC,SAASC,cAAc,mBAAmBC,SAE5C,YAlNJ,mEAkNA,GAlNA,sHAmNA,aACA,mCACA,mBACA,iDAGA,qCACA,uBAEA,oDACA,eACA,mBACA,uBAIA,gCACA,8CACA,iDACA,EAtOA,wBAuOA,GACA,aACA,0BACA,YACA,gBACA,cACA,2BA7OA,SA+OA,kBA/OA,gBA+OA,EA/OA,EA+OA,SA/OA,EA+OA,QA/OA,EA+OA,KACA,WACA,sBACA,yBACA,SAEA,IACA,kBAtPA,aAyPA,YAzPA,wBA0PA,oBACA,OACA,0BACA,cACA,YACA,gBACA,0BACA,gBACA,iBAlQA,UAqQA,mBArQA,iBAqQA,EArQA,EAqQA,SArQA,EAqQA,QArQA,EAqQA,KACA,WACA,sBACA,4BACA,SAEA,IACA,kBA5QA,wGAgRIC,qBAhRJ,SAgRA,KACUjC,EAAKkC,OAAS,EAChBxD,KAAKzB,aAAaH,QAAQ,SAAlC,GACUH,EAAE2B,MAAMgD,SAA4B,QAAjB3E,EAAE4E,aAGvB7C,KAAKzB,aAAaH,QAAQ,SAAlC,GACUH,EAAE2B,MAAMgD,WAClB,sBACA,yBACA,2BAIM5C,KAAKL,YAAc2B,EACnBtB,KAAKqB,gBAAgBC,EAAMmC,IAE7B,cAjSJ,kKAmSA,8BAnSA,gCAoSA,+CApSA,yDAqSA,+CArSA,iCAkSA,EAlSA,EAkSA,OAlSA,EAkSA,UAlSA,EAkSA,KAKA,UACA,yBACA,SACA,8DACA,gCACA,2CACA,YACA,EADA,CAEA,QACA,iDACA,4BAjTA,uGAuTIC,iBAvTJ,WAwTM,IAAN,mCACM1D,KAAKzB,aAAeoF,EAAa,KAAO,EAA9C,KACM3D,KAAKxB,aAAemF,EAAa,KAAO,EAA9C,KACM3D,KAAKvB,cAAekF,IAGxBC,QAlbF,WAmbQ5D,KAAKH,MACPG,KAAKpB,aAAaiF,SAElB7D,KAAK0D,mBACL1D,KAAK8D,gBAEP9D,KAAKC,YACLD,KAAK+D,kBAEPC,QA5bF,WA6bIhE,KAAKgC,kBCleLiC,EAAS,WAAa,IAAIC,EAAIlE,KAASmE,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,IAAI,QAAQC,MAAM,CAAC,UAAYN,EAAIxF,UAAU,kBAAoBwF,EAAI3F,aAAa,kBAAoB2F,EAAI1F,aAAa,aAAe0F,EAAItF,aAAa,WAAasF,EAAIrF,WAAW,WAAaqF,EAAIxE,WAAW,aAAewE,EAAIzF,aAAa,YAAa,EAAM,YAAc,OAAOgG,GAAG,CAAC,UAAYP,EAAIzC,UAAU,gBAAkByC,EAAIX,qBAAqB,aAAeW,EAAIlD,aAAa,YAAckD,EAAIrD,YAAY,WAAaqD,EAAIzD,WAAW,eAAiByD,EAAIvD,eAAe,aAAeuD,EAAI/D,iBAC3lBuE,EAAkB,G,YCDtB,SAASC,EAAaC,GACpB,EAAQ,QAQV,IAAIC,GAA8B,EAE9BC,EAAiBH,EAEjBI,EAAkB,kBAElBC,EAA4B,KAE5BC,EAAY,eACd,EACA,EACA,EACAJ,EACAC,EACAC,EACAC,GAGa,aAAAC,EAAiB","file":"js/chunk-49046d12.d554c5e0.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-79b45d19\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./enums.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-loader/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7637bff8\", content, true, {});","export const formatData = data => {\n  let exportData = [];\n  exportData = data.map((_, index) => {\n    return {\n      ..._,\n      weTableForm: { ..._ }\n    };\n  });\n\n  exportData.forEach(_ => {\n    for (let i in _[\"weTableForm\"]) {\n      if (\n        typeof _[\"weTableForm\"][i] === \"object\" &&\n        _[\"weTableForm\"][i] !== null\n      ) {\n        _[\"weTableForm\"][i] = _[i].value || _[i].key_name;\n      }\n    }\n  });\n  return exportData.map(_ => _.weTableForm);\n};\n","<template>\n  <WeTable\n    :tableData=\"tableData\"\n    :tableOuterActions=\"outerActions\"\n    :tableInnerActions=\"innerActions\"\n    :tableColumns=\"tableColumns\"\n    :pagination=\"pagination\"\n    :ascOptions=\"ascOptions\"\n    :showCheckbox=\"showCheckbox\"\n    :isSortable=\"false\"\n    @actionFun=\"actionFun\"\n    @getSelectedRows=\"onSelectedRowsChange\"\n    @handleSubmit=\"handleSubmit\"\n    @sortHandler=\"sortHandler\"\n    @pageChange=\"pageChange\"\n    @pageSizeChange=\"pageSizeChange\"\n    @getGroupList=\"getGroupList\"\n    tableHeight=\"650\"\n    ref=\"table\"\n  ></WeTable>\n</template>\n\n<script>\nimport {\n  getAllSystemEnumCodes,\n  getSystemCategories,\n  getEffectiveStatus,\n  createEnumCode,\n  updateEnumCode,\n  getGroupListByCodeId,\n  deleteEnumCodes,\n  getAllNonSystemEnumCodes,\n  getNonSystemCategories\n} from \"@/api/server.js\";\nimport { formatData } from \"../util/format.js\";\nimport { outerActions, innerActions } from \"@/const/actions.js\";\n\nexport default {\n  data() {\n    return {\n      outerActions,\n      innerActions,\n      showCheckbox: true,\n      tableData: [],\n      seachFilters: {},\n      tableColumns: [\n        {\n          title: \"枚举名称\",\n          key: \"catName\",\n          inputKey: \"catId\",\n          searchSeqNo: 1,\n          displaySeqNo: 1,\n          component: \"WeSelect\",\n          onChange: \"getGroupList\",\n          disEditor: true, // 枚举名称不可改\n          inputType: \"select\",\n          placeholder: \"catName\",\n          options: []\n        },\n        {\n          title: \"枚举键\",\n          key: \"code\",\n          inputKey: \"code\",\n          searchSeqNo: 2,\n          displaySeqNo: 2,\n          component: \"Input\",\n          inputType: \"text\",\n          placeholder: \"code\"\n        },\n        {\n          title: \"枚举值\",\n          key: \"value\",\n          inputKey: \"value\",\n          searchSeqNo: 3,\n          displaySeqNo: 3,\n          component: \"Input\",\n          inputType: \"text\",\n          placeholder: \"value\"\n        },\n        {\n          title: \"枚举类型\",\n          key: \"catTypeName\",\n          inputKey: \"cat.catType.catTypeName\",\n          searchSeqNo: 0, // 不可作为搜索条件\n          displaySeqNo: 4,\n          component: \"Input\",\n          disEditor: true, // 枚举类型不可改\n          inputType: \"text\",\n          placeholder: \"catTypeName\"\n        },\n        {\n          title: \"枚举组\",\n          key: \"groupCodeId\",\n          inputKey: \"groupCodeId\",\n          searchSeqNo: 5,\n          displaySeqNo: 5,\n          component: \"WeSelect\",\n          inputType: \"select\",\n          placeholder: \"groupCodeId\",\n          optionKey: \"catId\"\n        },\n        {\n          title: \"状态\",\n          key: \"status\",\n          inputKey: \"status\",\n          searchSeqNo: 6,\n          displaySeqNo: 6,\n          component: \"WeSelect\",\n          inputType: \"select\",\n          placeholder: \"status\",\n          options: []\n        }\n      ],\n      pagination: {\n        pageSize: 10,\n        currentPage: 1,\n        total: 0\n      },\n      payload: {\n        filters: [],\n        pageable: {\n          pageSize: 10,\n          startIndex: 0\n        },\n        paging: true,\n        sorting: {\n          asc: true,\n          field: \"\"\n        },\n        refResources: [\"cat\"]\n      },\n      ascOptions: {},\n      seletedRows: []\n    };\n  },\n  props: {\n    catId: {}\n  },\n  watch: {\n    catId: {\n      handler(val) {\n        this.queryData();\n        if (val) {\n          this.getGroupList(val);\n        }\n      },\n      immediate: true\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    this.$destroy();\n    next();\n  },\n  methods: {\n    pageChange(current) {\n      this.pagination.currentPage = current;\n      this.queryData();\n    },\n    pageSizeChange(size) {\n      this.pagination.pageSize = size;\n      this.queryData();\n    },\n    sortHandler(data) {\n      this.payload.sorting = {\n        asc: data.order === \"asc\",\n        field: data.key\n      };\n      this.queryData();\n    },\n    handleSubmit(data) {\n      this.payload.filters = data;\n      this.pagination.currentPage = 1;\n      this.queryData();\n    },\n    setNewAddedRow(index, key, v) {\n      this.$refs.table.data[index][key] = v;\n    },\n    async getGroupList(catId) {\n      if (catId) {\n        const { data, status, message } = await getGroupListByCodeId(catId);\n        let opts = [];\n        if (status === \"OK\") {\n          opts = data.map(_ => {\n            return {\n              value: _.codeId,\n              label: _.value\n            };\n          });\n        }\n        this.$set(this.ascOptions, catId, opts);\n      }\n      this.$refs.table.form.groupCodeId = \"\";\n    },\n    getAsyncOptions(rows, disable) {\n      rows.forEach(async _ => {\n        if (!this.ascOptions[_.catId] && _.catId > 0) {\n          this.getGroupList(_.catId);\n        }\n      });\n      this.$refs.table.setTableData(disable);\n    },\n    async queryData() {\n      this.payload.pageable.pageSize = this.pagination.pageSize;\n      this.payload.pageable.startIndex =\n        (this.pagination.currentPage - 1) * this.pagination.pageSize;\n      if (this.catId > -1) {\n        const found = this.payload.filters.find(_ => _.name === \"catId\");\n        if (found) {\n          found.value = this.catId;\n        } else {\n          this.payload.filters.push({\n            name: \"catId\",\n            operator: \"eq\",\n            value: this.catId\n          });\n        }\n      }\n      const { status, message, data } =\n        this.$route.name === \"baseData\"\n          ? await getAllSystemEnumCodes(this.payload)\n          : await getAllNonSystemEnumCodes(this.payload);\n      if (status === \"OK\") {\n        this.pagination.total = data.pageInfo.totalRows;\n        this.tableData = data.contents.map(_ => {\n          return {\n            ..._,\n            ..._.cat,\n            catTypeName:\n              _.cat.catType.catTypeName === \"sys\"\n                ? \"系统枚举\"\n                : _.cat.catType.catTypeName === \"common\"\n                ? \"公有枚举\"\n                : \"私有枚举-\" + _.cat.catType.catTypeName\n          };\n        });\n      }\n    },\n    async getEnumNames() {\n      const { status, message, data } =\n        this.$route.name === \"baseData\"\n          ? await getSystemCategories()\n          : await getNonSystemCategories();\n      if (status === \"OK\") {\n        this.tableColumns[0].options = data.map(_ => {\n          // this.getGroupList(_.catId);\n          return {\n            value: _.catId,\n            label: _.catName\n          };\n        });\n      }\n    },\n    async getEnumsStatus() {\n      const { status, message, data } = await getEffectiveStatus();\n      if (status === \"OK\") {\n        this.tableColumns[this.tableColumns.length - 1].options = data.map(\n          _ => {\n            return {\n              value: _,\n              label: _\n            };\n          }\n        );\n      }\n    },\n\n    actionFun(type, data) {\n      switch (type) {\n        case \"export\":\n          this.exportHandler();\n          break;\n        case \"add\":\n          this.addHandler();\n          break;\n        case \"edit\":\n          this.editHandler();\n          break;\n        case \"save\":\n          this.saveHandler(data);\n          break;\n        case \"delete\":\n          this.deleteHandler(data);\n          break;\n        case \"cancel\":\n          this.cancelHandler();\n          break;\n        case \"innerCancel\":\n          this.$refs.table.rowCancelHandler(data.weTableRowId);\n          break;\n        default:\n          break;\n      }\n    },\n    cancelHandler() {\n      this.$refs.table.setAllRowsUneditable();\n      this.$refs.table.setCheckoutStatus();\n      this.outerActions &&\n        this.outerActions.forEach(_ => {\n          _.props.disabled = !(\n            _.actionType === \"add\" ||\n            _.actionType === \"export\" ||\n            _.actionType === \"cancel\"\n          );\n        });\n    },\n    addHandler() {\n      let emptyRowData = {};\n      this.tableColumns.forEach(_ => {\n        if (_.inputType === \"multiSelect\" || _.inputType === \"multiRef\") {\n          emptyRowData[_.inputKey] = [];\n        } else {\n          emptyRowData[_.inputKey] = \"\";\n        }\n      });\n      emptyRowData[\"isRowEditable\"] = true;\n      emptyRowData[\"isNewAddedRow\"] = true;\n      emptyRowData[\"weTableRowId\"] = new Date().getTime();\n      emptyRowData[\"catId\"] = this.catId ? this.catId : \"\";\n      this.tableData.unshift(emptyRowData);\n      this.$nextTick(() => {\n        this.$refs.table.pushNewAddedRowToSelections();\n        this.$refs.table.setCheckoutStatus(true);\n      });\n      this.outerActions.forEach(_ => {\n        _.props.disabled = _.actionType === \"add\";\n      });\n    },\n    editHandler() {\n      this.$refs.table.swapRowEditable(true);\n      this.outerActions.forEach(_ => {\n        if (_.actionType === \"save\") {\n          _.props.disabled = false;\n        }\n      });\n      this.$nextTick(() => {\n        this.$refs.table.setCheckoutStatus(true);\n      });\n    },\n    deleteHandler(deleteData) {\n      this.$Modal.confirm({\n        title: \"确认删除？\",\n        \"z-index\": 1000000,\n        onOk: async () => {\n          const payload = deleteData.map(_ => _.codeId);\n          const { status, message, data } = await deleteEnumCodes(payload);\n          if (status === \"OK\") {\n            this.$Notice.success({\n              title: \"Delete Enum Success\",\n              desc: message\n            });\n            this.outerActions.forEach(_ => {\n              _.props.disabled =\n                _.actionType === \"save\" ||\n                _.actionType === \"edit\" ||\n                _.actionType === \"delete\";\n            });\n            this.queryData();\n          }\n        },\n        onCancel: () => {}\n      });\n      document.querySelector(\".ivu-modal-mask\").click();\n    },\n    async saveHandler(data) {\n      let setBtnsStatus = () => {\n        this.outerActions.forEach(_ => {\n          _.props.disabled = !(\n            _.actionType === \"add\" || _.actionType === \"export\"\n          );\n        });\n        this.$refs.table.setAllRowsUneditable();\n        this.$nextTick(() => {\n          /* to get iview original data to set _ischecked flag */\n          let objData = this.$refs.table.$refs.table.$refs.tbody.objData;\n          for (let obj in objData) {\n            objData[obj]._isChecked = false;\n            objData[obj]._isDisabled = false;\n          }\n        });\n      };\n      let d = JSON.parse(JSON.stringify(data));\n      let addObj = d.find(_ => _.isNewAddedRow);\n      let editAry = d.filter(_ => !_.isNewAddedRow);\n      if (addObj) {\n        let payload = {\n          callbackId: 1,\n          catId: addObj.catId || this.catId,\n          code: addObj.code,\n          status: addObj.status,\n          value: addObj.value,\n          groupCodeId: addObj.groupCodeId\n        };\n        const { status, message, data } = await createEnumCode(payload);\n        if (status === \"OK\") {\n          this.$Notice.success({\n            title: \"Add Enum Success\",\n            desc: message\n          });\n          setBtnsStatus();\n          this.queryData();\n        }\n      }\n      if (editAry.length > 0) {\n        let payload = editAry.map(_ => {\n          return {\n            callbackId: _.weTableRowId,\n            catId: _.catId,\n            code: _.code,\n            codeId: _.codeId,\n            groupCodeId: _.groupCodeId,\n            status: _.status,\n            value: _.value\n          };\n        });\n        const { status, message, data } = await updateEnumCode(payload);\n        if (status === \"OK\") {\n          this.$Notice.success({\n            title: \"Update Enum Success\",\n            desc: message\n          });\n          setBtnsStatus();\n          this.queryData();\n        }\n      }\n    },\n    onSelectedRowsChange(rows, checkoutBoxdisable) {\n      if (rows.length > 0) {\n        this.outerActions.forEach(_ => {\n          _.props.disabled = _.actionType === \"add\";\n        });\n      } else {\n        this.outerActions.forEach(_ => {\n          _.props.disabled = !(\n            _.actionType === \"add\" ||\n            _.actionType === \"export\" ||\n            _.actionType === \"cancel\"\n          );\n        });\n      }\n      this.seletedRows = rows;\n      this.getAsyncOptions(rows, checkoutBoxdisable);\n    },\n    async exportHandler() {\n      const { status, message, data } =\n        this.$route.name === \"baseData\"\n          ? await getAllSystemEnumCodes({ ...this.payload, paging: false })\n          : await getAllNonSystemEnumCodes({ ...this.payload, paging: false });\n\n      if (status === \"OK\") {\n        this.$refs.table.export({\n          filename:\n            this.$route.name === \"baseData\" ? \"Basic Enums Data\" : \"Enums Data\",\n          data: data.contents.map(_ => {\n            const formatValue = _.value ? _.value.replace(/,/g, \";\") : \"\";\n            return {\n              ..._,\n              value: formatValue,\n              groupCodeId: _.groupCodeId ? _.groupCodeId.value : \"\",\n              catName: _.cat.catName\n            };\n          })\n        });\n      }\n    },\n    setActionsParams() {\n      const routerFlag = this.$route.name === \"enumEnquiry\";\n      this.outerActions = routerFlag ? null : outerActions;\n      this.innerActions = routerFlag ? null : innerActions;\n      this.showCheckbox = routerFlag ? false : true;\n    }\n  },\n  created() {\n    if (this.catId) {\n      this.tableColumns.shift();\n    } else {\n      this.setActionsParams();\n      this.getEnumNames();\n    }\n    this.queryData();\n    this.getEnumsStatus();\n  },\n  mounted() {\n    this.cancelHandler();\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('WeTable',{ref:\"table\",attrs:{\"tableData\":_vm.tableData,\"tableOuterActions\":_vm.outerActions,\"tableInnerActions\":_vm.innerActions,\"tableColumns\":_vm.tableColumns,\"pagination\":_vm.pagination,\"ascOptions\":_vm.ascOptions,\"showCheckbox\":_vm.showCheckbox,\"isSortable\":false,\"tableHeight\":\"650\"},on:{\"actionFun\":_vm.actionFun,\"getSelectedRows\":_vm.onSelectedRowsChange,\"handleSubmit\":_vm.handleSubmit,\"sortHandler\":_vm.sortHandler,\"pageChange\":_vm.pageChange,\"pageSizeChange\":_vm.pageSizeChange,\"getGroupList\":_vm.getGroupList}})}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","function injectStyle (context) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-79b45d19\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!sass-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./enums.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./enums.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./enums.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-79b45d19\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./enums.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-79b45d19\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n"],"sourceRoot":""}