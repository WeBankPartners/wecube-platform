{"version":3,"sources":["webpack:///./src/pages/designing/application-architecture.vue?5abb","webpack:///./src/pages/designing/application-architecture.vue?e0b0","webpack:///src/pages/designing/application-architecture.vue","webpack:///./src/pages/designing/application-architecture.vue?268a","webpack:///./src/pages/designing/application-architecture.vue"],"names":["content","module","i","locals","exports","add","default","push","components","PhysicalGraph","data","tabList","systemDesigns","systemDesignVersion","deployTree","fixVersionTreeModal","payload","filters","pageable","pageSize","startIndex","paging","sorting","systemDesignCiTypeId","invokeDesignCiTypeId","graph","systemDesignData","physicalGraphData","physicalGraphLinks","physicalGraphNodes","physicalGraphLineNodes","serviceDesign","unitDesign","currentTab","spinShow","isDataChanged","physicalSpin","invokeLines","isShowInvokeSequence","invokeSequenceCode","invokeSequenceForm","isShowInvokeSequenceDetial","invokeSequenceData","spliceInvokeSequenceList","totalNum","currentNum","currentInvokeSequenceTag","currentInvokeSequence","selectedInvokeSequence","computed","tableRef","this","needCheckout","$route","name","methods","closeInvokeSquence","initGraph","backInvokeSequence","reColorInvokeSequence","nextInvokeSequence","onSearchInvokeSquence","found","handleInvokeSquence","invokeDesignSequenceList","forEach","_","key_name","join","length","shadeAll","reColorCurrentInvokeSequenceLine","current","cancelFixVersion","graphCallback","formatTree","map","children","title","id","guid","expand","disableCheckbox","orchestration","initEvent","renderGraph","genDOT","console","log","dots","genChildrenDot","Array","concat","genServiceInvokeLine","unitNode","ciTypeId","serviceData","InvokeLine","line","state","stateColorMap","has","code","color","get","renderNode","node","renderServiceNode","result","renderOtherNodes","Object","keys","graphviz","renderDot","nodesString","svg","attr","width","height","edge","reColorCurrentInvokeSequenceNode","handleTabClick","getCurrentData","onSelectedRowsChange","rows","isUpdateableAry","r","nextOperations","find","isDeleteableAry","val","ci","outerActions","actionType","props","disabled","every","isValueTrue","actionFun","type","exportHandler","addHandler","editHandler","saveHandler","deleteHandler","cancelHandler","$refs","rowCancelHandler","weTableRowId","defaultHandler","sortHandler","asc","order","field","key","queryCiData","handleSubmit","tableColumns","inputType","emptyRowData","inputKey","tableData","unshift","setAllRowsUneditable","setCheckoutStatus","$Modal","confirm","onOk","onCancel","document","querySelector","click","swapRowEditable","$nextTick","deleteAttr","isAuto","attrs","propertyName","pageChange","pagination","currentPage","pageSizeChange","size","getSelectOptions","columns","queryCiAttrs","onSystemDesignSelect","created","getArchitectureDesignTabs","getSystemDesigns","render","_vm","_h","$createElement","_c","_self","staticStyle","_v","on","_l","item","_s","onArchChange","querySysTree","model","value","callback","$$v","expression","slot","onArchFixVersion","reloadHandler","_e","staticClass","ref","$set","refInFor","innerActions","ascOptions","staticRenderFns","injectStyle","context","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component"],"mappings":"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","file":"js/chunk-7df42495.2a78e2b7.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-301ff99e\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./application-architecture.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-loader/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"45c2c497\", content, true, {});","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ivu-card-head p[data-v-301ff99e]{height:30px;line-height:30px}.filter-title[data-v-301ff99e]{margin-right:10px}#physicalGraph[data-v-301ff99e]{position:relative;min-height:300px}\", \"\"]);\n\n// exports\n","<template>\n  <Row>\n    <Row>\n      <Col span=\"12\">\n        <Row>\n          <span style=\"margin-right: 10px\">系统设计</span>\n          <Select\n            filterable\n            @on-change=\"onSystemDesignSelect\"\n            label-in-name\n            style=\"width: 35%;\"\n          >\n            <Option\n              v-for=\"item in systemDesigns\"\n              :value=\"item.guid\"\n              :key=\"item.guid\"\n              >{{ item.name }}</Option\n            >\n          </Select>\n          <Button style=\"margin: 0 10px;\" @click=\"onArchChange\"\n            >架构变更</Button\n          >\n          <Button @click=\"querySysTree\">去定版</Button>\n          <Modal v-model=\"fixVersionTreeModal\" width=\"500px\" title=\"去定版\">\n            <div style=\"max-height: 600px; overflow: auto;\">\n              <Tree :data=\"deployTree\"></Tree>\n            </div>\n            <div slot=\"footer\">\n              <Button @click=\"cancelFixVersion\">取消定版</Button>\n              <Button type=\"info\" @click=\"onArchFixVersion\">确定定版</Button>\n            </div>\n          </Modal>\n        </Row>\n      </Col>\n    </Row>\n    <Card style=\"margin-top: 20px\">\n      <div>\n        <Tabs\n          type=\"card\"\n          :value=\"currentTab\"\n          :closable=\"false\"\n          @on-click=\"handleTabClick\"\n        >\n          <TabPane label=\"应用逻辑图\" name=\"architecture-design\">\n            <Alert show-icon closable v-if=\"isDataChanged\">\n              Data has beed changed, click Reload button to reload graph.\n              <Button slot=\"desc\" @click=\"reloadHandler\">Reload</Button>\n            </Alert>\n            <Spin size=\"large\" fix v-if=\"spinShow\">\n              <Icon type=\"ios-loading\" size=\"44\" class=\"spin-icon-load\"></Icon>\n              <div>加载中...</div>\n            </Spin>\n            <Row>\n              <Col span=\"18\">\n                <div style=\"padding-right: 20px\">\n                  <div class=\"graph-container\" id=\"graph\"></div>\n                </div>\n              </Col>\n              <Col\n                span=\"6\"\n                offset=\"0\"\n                class=\"func-wrapper\"\n                v-if=\"isShowInvokeSequence\"\n              >\n                <Collapse>\n                  <Panel name=\"invokeDesignSequence\">\n                    <b>调用时序设计</b>\n                    <Form\n                      slot=\"content\"\n                      ref=\"invokeSequenceForm\"\n                      :model=\"invokeSequenceForm\"\n                      label-position=\"left\"\n                      :label-width=\"120\"\n                    >\n                      <Form-item label=\"调用时序设计\">\n                        <Row>\n                          <Select\n                            placeholder=\"请选择\"\n                            v-model=\"invokeSequenceForm.selectedInvokeSequence\"\n                            style=\"width:calc(100% - 70px)\"\n                          >\n                            <Option\n                              v-for=\"item in invokeSequenceForm.invokeSequenceData\"\n                              :key=\"item.data.guid\"\n                              :value=\"item.data.guid\"\n                              >{{ item.data.code }}</Option\n                            >\n                          </Select>\n                          <Button\n                            style=\"margin-right: 10px;float: right; width=70px;\"\n                            @click=\"onSearchInvokeSquence\"\n                            >确定</Button\n                          >\n                        </Row>\n                      </Form-item>\n                      <Form-item\n                        label=\"调用时序设计序列\"\n                        v-if=\"invokeSequenceForm.isShowInvokeSequenceDetial\"\n                      >\n                        <span style=\"margin-right: 10px\">{{\n                          invokeSequenceForm.spliceInvokeSequenceList\n                        }}</span>\n                      </Form-item>\n                      <Form-Item\n                        label=\"当前调用\"\n                        v-if=\"invokeSequenceForm.isShowInvokeSequenceDetial\"\n                      >\n                        <Row>\n                          <span style=\"margin-right: 10px\">{{\n                            invokeSequenceForm.currentInvokeSequenceTag\n                          }}</span>\n                          <span\n                            class=\"header-buttons-container margin-right\"\n                            style=\"float:right\"\n                          >\n                            <Tooltip content=\"上一步\" placement=\"top-start\">\n                              <Button\n                                size=\"small\"\n                                @click=\"backInvokeSequence\"\n                                icon=\"md-arrow-round-back\"\n                              ></Button>\n                            </Tooltip>\n                            <span\n                              >{{ invokeSequenceForm.currentNum }}/{{\n                                invokeSequenceForm.totalNum\n                              }}</span\n                            >\n                            <Tooltip content=\"下一步\" placement=\"top-start\">\n                              <Button\n                                size=\"small\"\n                                @click=\"nextInvokeSequence\"\n                                icon=\"md-arrow-round-forward\"\n                              ></Button>\n                            </Tooltip>\n                          </span>\n                        </Row>\n                      </Form-Item>\n                      <Form-Item\n                        v-if=\"invokeSequenceForm.isShowInvokeSequenceDetial\"\n                      >\n                        <Button\n                          style=\"margin-right: calc(50% + 35px);width=70px;float: right\"\n                          @click=\"closeInvokeSquence\"\n                          >返回</Button\n                        >\n                      </Form-Item>\n                    </Form>\n                  </Panel>\n                </Collapse>\n              </Col>\n            </Row>\n          </TabPane>\n\n          <TabPane label=\"物理部署图\" name=\"physicalGraph\">\n            <div id=\"physicalGraph\">\n              <PhysicalGraph\n                v-if=\"physicalGraphData.length\"\n                :graphData=\"physicalGraphData\"\n                :links=\"physicalGraphLinks\"\n                :callback=\"graphCallback\"\n              ></PhysicalGraph>\n              <Spin size=\"large\" fix v-if=\"physicalSpin\">\n                <Icon\n                  type=\"ios-loading\"\n                  size=\"44\"\n                  class=\"spin-icon-load\"\n                ></Icon>\n                <div>加载中...</div>\n              </Spin>\n            </div>\n          </TabPane>\n          <TabPane\n            v-if=\"!!systemDesignVersion\"\n            v-for=\"ci in tabList\"\n            :key=\"ci.id\"\n            :name=\"ci.id\"\n            :label=\"ci.name\"\n          >\n            <WeTable\n              :tableData=\"ci.tableData\"\n              :tableOuterActions=\"ci.outerActions\"\n              :tableInnerActions=\"ci.innerActions\"\n              :tableColumns=\"ci.tableColumns\"\n              :pagination=\"ci.pagination\"\n              :ascOptions=\"ci.ascOptions\"\n              :showCheckbox=\"needCheckout\"\n              @actionFun=\"actionFun\"\n              @handleSubmit=\"handleSubmit\"\n              @sortHandler=\"sortHandler\"\n              @getSelectedRows=\"onSelectedRowsChange\"\n              @pageChange=\"pageChange\"\n              @pageSizeChange=\"pageSizeChange\"\n              tableHeight=\"650\"\n              :ref=\"'table' + ci.id\"\n            ></WeTable>\n          </TabPane>\n        </Tabs>\n      </div>\n    </Card>\n  </Row>\n</template>\n\n<script>\nimport * as d3 from \"d3-selection\";\nimport * as d3Graphviz from \"d3-graphviz\";\nimport {\n  getCiTypeAttributes,\n  deleteCiDatas,\n  createCiDatas,\n  updateCiDatas,\n  getEnumCodesByCategoryId,\n  getCiTypes,\n  getSystemDesigns,\n  updateCIRecord,\n  getAllDesignTreeFromSystemDesign,\n  saveAllDesignTreeFromSystemDesign,\n  getArchitectureDesignTabs,\n  getArchitectureCiDatas,\n  getAllCITypes,\n  operateCiState,\n  getApplicationFrameworkDesignDataTree,\n  getAllZoneLinkDesignGroupByIdcDesign\n} from \"@/api/server\";\nimport {\n  outerActions,\n  innerActions,\n  pagination,\n  components\n} from \"@/const/actions.js\";\nimport { formatData } from \"../util/format.js\";\nimport { getExtraInnerActions } from \"../util/state-operations.js\";\nimport PhysicalGraph from \"./physical-graph\";\n\nconst stateColorMap = new Map([\n  [\"new\", \"#2f7344\"],\n  [\"created\", \"#2f7344\"],\n  [\"update\", \"dodgerblue\"],\n  [\"change\", \"dodgerblue\"],\n  [\"destroyed\", \"red\"],\n  [\"delete\", \"red\"]\n]);\nconst colors = [\n  \"#c8d6f0\",\n  \"#cde4fd\",\n  \"#acc1e8\",\n  \"#516282\",\n  \"#243047\",\n  \"#0f1624\"\n];\nexport default {\n  components: {\n    PhysicalGraph\n  },\n  data() {\n    return {\n      tabList: [],\n      systemDesigns: [],\n      systemDesignVersion: \"\",\n      deployTree: [],\n      fixVersionTreeModal: false,\n      payload: {\n        filters: [],\n        pageable: {\n          pageSize: 10,\n          startIndex: 0\n        },\n        paging: true,\n        sorting: {}\n      },\n      systemDesignCiTypeId: \"\",\n      invokeDesignCiTypeId: \"\",\n      graph: {},\n      systemDesignData: [],\n      physicalGraphData: [],\n      physicalGraphLinks: [],\n      physicalGraphNodes: {},\n      physicalGraphLineNodes: {\n        serviceDesign: {},\n        unitDesign: {}\n      },\n      currentTab: \"architecture-design\",\n      spinShow: false,\n      isDataChanged: false,\n      physicalSpin: false,\n      invokeLines: [],\n      isShowInvokeSequence: false,\n      invokeSequenceCode: \"6\",\n      invokeSequenceForm: {\n        isShowInvokeSequenceDetial: false,\n        invokeSequenceData: [],\n        spliceInvokeSequenceList: \"\",\n        totalNum: 0,\n        currentNum: 0,\n        currentInvokeSequenceTag: \"\",\n        currentInvokeSequence: [],\n        selectedInvokeSequence: \"\"\n      }\n    };\n  },\n  computed: {\n    tableRef() {\n      return \"table\" + this.currentTab;\n    },\n    needCheckout() {\n      return this.$route.name === \"ciDataEnquiry\" ? false : true;\n    }\n  },\n  methods: {\n    closeInvokeSquence() {\n      this.invokeSequenceForm.totalNum = 0;\n      this.invokeSequenceForm.currentNum = 0;\n      this.invokeSequenceForm.selectedInvokeSequence = \"\";\n      this.invokeSequenceForm.currentInvokeSequenceTag = \"\";\n      this.invokeSequenceForm.currentInvokeSequence = [];\n      this.invokeSequenceForm.isShowInvokeSequenceDetial = false;\n      this.invokeSequenceForm.spliceInvokeSequenceList = \"\";\n      this.initGraph();\n    },\n    backInvokeSequence() {\n      if (this.invokeSequenceForm.currentNum > 1) {\n        let invokeDesignSequenceList = this.invokeSequenceForm\n          .currentInvokeSequence;\n        this.invokeSequenceForm.currentNum =\n          this.invokeSequenceForm.currentNum - 1;\n        this.invokeSequenceForm.currentInvokeSequenceTag =\n          invokeDesignSequenceList[\n            this.invokeSequenceForm.currentNum - 1\n          ].key_name;\n        this.reColorInvokeSequence();\n      }\n    },\n    nextInvokeSequence() {\n      if (\n        this.invokeSequenceForm.currentNum < this.invokeSequenceForm.totalNum\n      ) {\n        let invokeDesignSequenceList = this.invokeSequenceForm\n          .currentInvokeSequence;\n        this.invokeSequenceForm.currentNum =\n          this.invokeSequenceForm.currentNum + 1;\n        this.invokeSequenceForm.currentInvokeSequenceTag =\n          invokeDesignSequenceList[\n            this.invokeSequenceForm.currentNum - 1\n          ].key_name;\n        this.reColorInvokeSequence();\n      }\n    },\n    async getAllInvokeSequenceData() {\n      this.invokeSequenceForm.invokeSequenceData = [];\n      let found = this.tabList.find(i => i.code === this.invokeSequenceCode);\n      const { status, message, data } = await getArchitectureCiDatas(\n        found.codeId,\n        this.systemDesignVersion,\n        {}\n      );\n      if (status === \"OK\") {\n        this.invokeSequenceForm.invokeSequenceData = data.contents;\n      }\n    },\n    onSearchInvokeSquence() {\n      this.invokeSequenceForm.isShowInvokeSequenceDetial = true;\n      const found = this.invokeSequenceForm.invokeSequenceData.find(\n        i => i.data.guid === this.invokeSequenceForm.selectedInvokeSequence\n      );\n      if (found) {\n        this.invokeSequenceForm.currentInvokeSequence =\n          found.data.invoke_design_sequence;\n        this.handleInvokeSquence(true);\n      }\n    },\n    handleInvokeSquence() {\n      let invokeDesignSequenceList = this.invokeSequenceForm\n        .currentInvokeSequence;\n      let spliceInvokeSequenceList = [];\n      invokeDesignSequenceList.forEach(_ => {\n        spliceInvokeSequenceList.push(_.key_name);\n      });\n      this.invokeSequenceForm.spliceInvokeSequenceList = spliceInvokeSequenceList.join(\n        \" -> \"\n      );\n      if (invokeDesignSequenceList.length > 0) {\n        this.invokeSequenceForm.totalNum = invokeDesignSequenceList.length;\n        this.invokeSequenceForm.currentNum = 1;\n        this.invokeSequenceForm.currentInvokeSequenceTag =\n          invokeDesignSequenceList[0].key_name;\n      }\n      this.reColorInvokeSequence();\n    },\n    reColorInvokeSequence() {\n      this.initGraph();\n      this.shadeAll();\n\n      this.invokeSequenceForm.currentInvokeSequence.forEach(_ => {\n        this.reColorCurrentInvokeSequenceNode(\n          _.service_design,\n          \"ellipse\",\n          \"green\"\n        );\n        this.reColorCurrentInvokeSequenceNode(\n          _.unit_design,\n          \"polygon\",\n          \"green\"\n        );\n        this.reColorCurrentInvokeSequenceLine(_, \"green\");\n      });\n\n      let index = this.invokeSequenceForm.currentNum;\n      let current = this.invokeSequenceForm.currentInvokeSequence[index - 1];\n      this.reColorCurrentInvokeSequenceLine(current, \"red\");\n    },\n    async onArchFixVersion() {\n      if (this.systemDesignVersion === \"\") return;\n      const { status, message, data } = await saveAllDesignTreeFromSystemDesign(\n        this.systemDesignVersion\n      );\n      if (status === \"OK\") {\n        this.$Notice.success({\n          title: \"Success\",\n          desc: message\n        });\n        this.fixVersionTreeModal = false;\n      }\n    },\n    cancelFixVersion() {\n      this.fixVersionTreeModal = false;\n    },\n    async reloadHandler() {\n      this.onArchChange();\n      this.isDataChanged = false;\n    },\n    async onArchChange() {\n      let { status, message, data } = await getAllCITypes();\n      if (status === \"OK\") {\n        data.forEach(ci => {\n          if (ci.tableName === \"system_design\") {\n            this.systemDesignCiTypeId = ci.ciTypeId + \"\";\n          }\n          if (ci.tableName === \"invoke_design\") {\n            this.invokeDesignCiTypeId = ci.ciTypeId;\n          }\n        });\n      }\n\n      if (this.systemDesignVersion === \"\") return;\n      this.spinShow = true;\n      this.physicalSpin = true;\n      this.getAllDesignTreeFromSystemDesign();\n      this.getPhysicalGraphData();\n    },\n    async getAllDesignTreeFromSystemDesign() {\n      const { status, message, data } = await getAllDesignTreeFromSystemDesign(\n        this.systemDesignVersion\n      );\n      if (status === \"OK\") {\n        this.getAllInvokeSequenceData();\n        this.systemDesignData = data ? data : [];\n        this.initGraph();\n      }\n\n      let response = await updateCIRecord(this.systemDesignCiTypeId, {\n        guid: this.systemDesignVersion\n      });\n    },\n    async getPhysicalGraphData() {\n      this.physicalGraphData = [];\n      const promiseArray = [\n        getApplicationFrameworkDesignDataTree(this.systemDesignVersion),\n        getAllZoneLinkDesignGroupByIdcDesign()\n      ];\n      const [graphData, links] = await Promise.all(promiseArray);\n      if (graphData.status === \"OK\") {\n        if (graphData.data.length) {\n          this.physicalGraphData = graphData.data;\n        } else {\n          this.physicalGraphData = [];\n          this.physicalSpin = false;\n        }\n      }\n      if (links.status === \"OK\") {\n        this.physicalGraphLinks = links.data || [];\n      }\n    },\n    graphCallback() {\n      this.physicalSpin = false;\n    },\n    async querySysTree() {\n      if (this.systemDesignVersion === \"\") return;\n      this.spinShow = true;\n      const { status, message, data } = await getAllDesignTreeFromSystemDesign(\n        this.systemDesignVersion\n      );\n      if (status === \"OK\") {\n        this.spinShow = false;\n        this.systemDesignData = data ? data : [];\n        this.deployTree = this.formatTree(this.systemDesignData);\n        this.fixVersionTreeModal = true;\n      }\n    },\n    formatTree(data) {\n      return data.map(_ => {\n        if (_.children && _.children.length > 0) {\n          return {\n            ..._,\n\n            title: _.data.key_name,\n            id: _.guid,\n            expand: true,\n            disableCheckbox: !_.data.orchestration,\n            children: this.formatTree(_.children)\n          };\n        } else {\n          return {\n            ..._,\n            title: _.data.key_name,\n            id: _.guid,\n            expand: true,\n            disableCheckbox: !_.data.orchestration\n          };\n        }\n      });\n    },\n    initGraph(filters = {}) {\n      this.isShowInvokeSequence = true;\n      this.spinShow = true;\n      let graph;\n\n      const initEvent = () => {\n        graph = d3.select(\"#graph\");\n\n        graph\n          .on(\"dblclick.zoom\", null)\n          .on(\"wheel.zoom\", null)\n          .on(\"mousewheel.zoom\", null);\n        this.graph.graphviz = graph\n          .graphviz()\n          .scale(1.2)\n          .width(window.innerWidth * 0.96)\n          .height(window.innerHeight * 0.8)\n          .zoom(true);\n      };\n\n      initEvent();\n      this.renderGraph(this.systemDesignData);\n      this.spinShow = false;\n    },\n    genDOT(sysData) {\n      this.physicalGraphNodes = {};\n      this.physicalGraphLineNodes = {\n        serviceDesign: {},\n        unitDesign: {}\n      };\n      this.invokeLines = [];\n      const width = 16;\n      const height = 12;\n      let dots = [\n        \"digraph G{\",\n        \"rankdir=LR nodesep=0.5;\",\n        \"Node [fontname=Arial, fontsize=12];\",\n        'Edge [fontname=Arial, minlen=\"2\",fontsize=10];',\n        `size=\"${width},${height}\";`,\n        `subgraph cluster_${sysData[0].guid} {`,\n        `style=\"filled\";color=\"#c8d6f0\";`,\n        `tooltip=\"${sysData[0].data.description}\";`,\n        `label=\"${sysData[0].data.code}\";`,\n        this.genChildrenDot(sysData[0].children || [], 1),\n        \"}\",\n        ...this.invokeLines,\n        this.renderOtherNodes(),\n        \"}\"\n      ];\n\n      console.log(\n        dots\n          .join(\"\")\n          .replace(/;/g, \";\\n\")\n          .replace(/]/g, \"]\\n\")\n      );\n\n      return dots.join(\"\");\n    },\n    genChildrenDot(data, level) {\n      let dots = [];\n      data.forEach(_ => {\n        if (_.children instanceof Array && _.children.length) {\n          dots = dots.concat([\n            `subgraph cluster_${_.guid}{`,\n            `id=\"g_${_.guid}\";`,\n            `style=\"filled\";color=\"${colors[level]}\";`,\n            `label=\"${_.data.code || _.data.key_name}\";`,\n            `tooltip=\"${_.data.description || _.data.name}\"`,\n            _.ciTypeId === 3\n              ? this.genServiceInvokeLine(_)\n              : this.genChildrenDot(_.children, level + 1),\n            \"}\"\n          ]);\n        } else {\n          this.physicalGraphNodes[_.guid] = _;\n          dots = dots.concat([\n            `\"${_.guid}\"`,\n            `[id=\"n_${_.guid}\";`,\n            `label=\"${_.data.code || _.data.key_name}\";`,\n            \"shape=box;\",\n            `style=\"filled\";color=\"${colors[level]}\";`,\n            `tooltip=\"${_.data.description || _.data.name}\"];`\n          ]);\n        }\n      });\n      return dots.join(\"\");\n    },\n    genServiceInvokeLine(unitNode) {\n      const unitLabel = unitNode.data.code || unitNode.data.key_name;\n      let serviceData = [];\n      let InvokeLine = [];\n      unitNode.children.forEach(_ => {\n        if (_.ciTypeId === 4) {\n          serviceData.push(_);\n        } else if (_.ciTypeId === 5) {\n          InvokeLine.push(_);\n        }\n      });\n      if (InvokeLine.length) {\n        InvokeLine.forEach(line => {\n          let color = \"grey\";\n          if (line.data.state && stateColorMap.has(line.data.state.code)) {\n            color = stateColorMap.get(line.data.state.code);\n          }\n          this.invokeLines.push(\n            `gn_${line.data.unit_design.guid} -> gn_${\n              line.data.service_design.guid\n            } [id=\"gl_${line.guid}\",color=\"${color}\",taillabel=\"${\n              line.data.type.value\n            }\", labeldistance=3];`\n          );\n          this.physicalGraphLineNodes.serviceDesign[\n            line.data.service_design.guid\n          ] = line.data.service_design;\n          this.physicalGraphLineNodes.unitDesign[line.data.unit_design.guid] =\n            line.data.unit_design;\n        });\n      }\n      return [\n        this.renderNode(unitNode, \"doubleoctagon\"),\n        ...this.renderServiceNode(serviceData, unitNode)\n      ].join(\"\");\n    },\n    renderNode(node, nodeType) {\n      this.physicalGraphNodes[node.guid] = node;\n      return `\"gn_${node.guid}\" [label=\"${node.data.code}\", id=\"gn_${\n        node.guid\n      }\", shape=${nodeType ||\n        \"ellipse\"},style=\"filled\", color=\"${stateColorMap.get(\n        node.data.state.code\n      )}\", tooltip=\"${node.data.description || node.data.name}\"]`;\n    },\n    renderServiceNode(serviceData, unitNode) {\n      let result = [];\n      if (serviceData.length) {\n        serviceData.forEach(_ => {\n          result = result.concat([\n            this.renderNode(_),\n            `\"gn_${_.guid}\" -> \"gn_${unitNode.guid}\" [arrowhead = \"t\"]`\n          ]);\n        });\n      }\n      return result;\n    },\n    renderOtherNodes() {\n      let result = \"\";\n      Object.keys(this.physicalGraphLineNodes.serviceDesign).forEach(\n        serviceGuid => {\n          if (!this.physicalGraphNodes[serviceGuid]) {\n            const node = this.physicalGraphLineNodes.serviceDesign[serviceGuid];\n            result += `\"gn_${node.guid}\" [label=\"${node.code}\",id=\"gn_${\n              node.guid\n            }\",shape=\"ellipse\",tooltip=\"${node.description || node.name}\"]`;\n          }\n        }\n      );\n      Object.keys(this.physicalGraphLineNodes.unitDesign).forEach(unitGuid => {\n        if (!this.physicalGraphNodes[unitGuid]) {\n          const node = this.physicalGraphLineNodes.unitDesign[unitGuid];\n          result += `\"gn_${node.guid}\" [label=\"${node.code}\",id=\"gn_${\n            node.guid\n          }\",shape=\"doubleoctagon\",tooltip=\"${node.description || node.name}\"]`;\n        }\n      });\n      return result;\n    },\n    renderGraph(data) {\n      let nodesString = this.genDOT(data);\n      this.graph.graphviz.renderDot(nodesString);\n      let svg = d3.select(\"#graph\").select(\"svg\");\n      let width = svg.attr(\"width\");\n      let height = svg.attr(\"height\");\n      svg.attr(\"viewBox\", \"0 0 \" + width + \" \" + height);\n    },\n    shadeAll() {\n      d3.selectAll(\"g path\")\n        .attr(\"stroke\", \"#7f8fa6\")\n        .attr(\"stroke-opacity\", \".2\");\n      d3.selectAll(\"g polygon\")\n        .attr(\"stroke\", \"#7f8fa6\")\n        .attr(\"stroke-opacity\", \".2\")\n        .attr(\"fill\", \"#7f8fa6\")\n        .attr(\"fill-opacity\", \".2\");\n      d3.selectAll(\"g ellipse\")\n        .attr(\"stroke\", \"#7f8fa6\")\n        .attr(\"stroke-opacity\", \".2\")\n        .attr(\"fill\", \"#7f8fa6\")\n        .attr(\"fill-opacity\", \".2\");\n      d3.selectAll(\"text\").attr(\"fill\", \"#000\");\n    },\n    reColorCurrentInvokeSequenceLine(invokeSequence, color) {\n      //line\n      let edge = d3\n        .select(\"#\" + `gl_${invokeSequence.guid}`)\n        .attr(\"stroke\", color)\n        .attr(\"stroke-opacity\", \"1\");\n      edge\n        .select(\"path\")\n        .attr(\"stroke\", color)\n        .attr(\"stroke-opacity\", \"1\");\n      edge\n        .select(\"polygon\")\n        .attr(\"fill\", color)\n        .attr(\"stroke\", color)\n        .attr(\"stroke-opacity\", \"1\");\n    },\n    reColorCurrentInvokeSequenceNode(nodeId, nodeType, color) {\n      //node\n      let node = d3.select(\"#\" + `gn_${nodeId}`);\n      node\n        .selectAll(nodeType)\n        .attr(\"fill\", color)\n        .attr(\"stroke\", color)\n        .attr(\"stroke-opacity\", \"1\");\n    },\n    handleTabClick(name) {\n      this.payload.filters = [];\n      this.currentTab = name;\n      if (name !== \"architecture-design\" && name !== \"physicalGraph\") {\n        this.getCurrentData();\n      }\n    },\n    onSelectedRowsChange(rows, checkoutBoxdisable) {\n      if (rows.length > 0) {\n        let isUpdateableAry = [];\n        let isDeleteableAry = [];\n\n        rows.forEach((r, index) => {\n          isUpdateableAry.push(!!r.nextOperations.find(op => op === \"update\"));\n          isDeleteableAry.push(!!r.nextOperations.find(op => op === \"delete\"));\n        });\n        let isValueTrue = val => {\n          return val === true;\n        };\n\n        this.tabList.forEach(ci => {\n          if (ci.id === this.currentTab) {\n            ci.outerActions.forEach(_ => {\n              switch (_.actionType) {\n                case \"add\":\n                  _.props.disabled = _.actionType === \"add\";\n                  break;\n                case \"edit\":\n                  _.props.disabled = !isUpdateableAry.every(isValueTrue);\n                  break;\n                case \"delete\":\n                  _.props.disabled = !isDeleteableAry.every(isValueTrue);\n                  break;\n                default:\n                  break;\n              }\n            });\n          }\n        });\n      } else {\n        this.tabList.forEach(ci => {\n          if (ci.id === this.currentTab) {\n            ci.outerActions.forEach(_ => {\n              _.props.disabled = !(\n                _.actionType === \"add\" ||\n                _.actionType === \"export\" ||\n                _.actionType === \"cancel\"\n              );\n            });\n          }\n        });\n      }\n    },\n    actionFun(type, data) {\n      switch (type) {\n        case \"export\":\n          this.exportHandler();\n          break;\n        case \"add\":\n          this.addHandler();\n          break;\n        case \"edit\":\n          this.editHandler();\n          break;\n        case \"save\":\n          this.saveHandler(data);\n          break;\n        case \"delete\":\n          this.deleteHandler(data);\n          break;\n        case \"cancel\":\n          this.cancelHandler();\n          break;\n        case \"innerCancel\":\n          this.$refs[this.tableRef][0].rowCancelHandler(data.weTableRowId);\n          break;\n        default:\n          this.defaultHandler(type, data);\n          break;\n      }\n    },\n    sortHandler(data) {\n      this.payload.sorting = {\n        asc: data.order === \"asc\",\n        field: data.key\n      };\n      this.queryCiData();\n    },\n    handleSubmit(data) {\n      this.payload.filters = data;\n      this.queryCiData();\n    },\n    async defaultHandler(type, row) {\n      const { data, status, message } = await operateCiState(\n        this.currentTab,\n        row.guid,\n        type\n      );\n      if (status === \"OK\") {\n        this.$Notice.success({\n          title: type,\n          desc: message\n        });\n        this.queryCiData();\n      }\n    },\n    addHandler() {\n      this.tabList.forEach(ci => {\n        if (ci.id === this.currentTab) {\n          let emptyRowData = {};\n          ci.tableColumns.forEach(_ => {\n            if (_.inputType === \"multiSelect\" || _.inputType === \"multiRef\") {\n              emptyRowData[_.inputKey] = [];\n            } else {\n              emptyRowData[_.inputKey] = \"\";\n            }\n          });\n          emptyRowData[\"isRowEditable\"] = true;\n          emptyRowData[\"isNewAddedRow\"] = true;\n          emptyRowData[\"weTableRowId\"] = 1;\n          emptyRowData[\"nextOperations\"] = [];\n\n          ci.tableData.unshift(emptyRowData);\n          this.$nextTick(() => {\n            this.$refs[this.tableRef][0].pushNewAddedRowToSelections();\n            this.$refs[this.tableRef][0].setCheckoutStatus(true);\n          });\n          ci.outerActions.forEach(_ => {\n            _.props.disabled = _.actionType === \"add\";\n          });\n        }\n      });\n    },\n    cancelHandler() {\n      this.$refs[this.tableRef][0].setAllRowsUneditable();\n      this.$refs[this.tableRef][0].setCheckoutStatus();\n      this.tabList.forEach(ci => {\n        if (ci.id === this.currentTab) {\n          ci.outerActions.forEach(_ => {\n            _.props.disabled = !(\n              _.actionType === \"add\" ||\n              _.actionType === \"export\" ||\n              _.actionType === \"cancel\"\n            );\n          });\n        }\n      });\n    },\n    deleteHandler(deleteData) {\n      this.$Modal.confirm({\n        title: \"确认删除？\",\n        \"z-index\": 1000000,\n        onOk: async () => {\n          let found = this.tabList.find(i => i.id === this.currentTab);\n          const payload = {\n            id: found && found.code,\n            deleteData: deleteData.map(_ => _.guid)\n          };\n          const { status, message, data } = await deleteCiDatas(payload);\n          if (status === \"OK\") {\n            this.$Notice.success({\n              title: \"Delete data Success\",\n              desc: message\n            });\n            this.tabList.forEach(ci => {\n              if (ci.id === this.currentTab) {\n                ci.outerActions.forEach(_ => {\n                  _.props.disabled =\n                    _.actionType === \"save\" ||\n                    _.actionType === \"edit\" ||\n                    _.actionType === \"delete\";\n                });\n              }\n            });\n            this.isDataChanged = true;\n            this.queryCiData();\n          }\n        },\n        onCancel: () => {}\n      });\n      document.querySelector(\".ivu-modal-mask\").click();\n    },\n    editHandler() {\n      this.$refs[this.tableRef][0].swapRowEditable(true);\n      this.tabList.forEach(ci => {\n        if (ci.id === this.currentTab) {\n          ci.outerActions.forEach(_ => {\n            if (_.actionType === \"save\") {\n              _.props.disabled = false;\n            }\n          });\n        }\n      });\n      this.$nextTick(() => {\n        this.$refs[this.tableRef][0].setCheckoutStatus(true);\n      });\n    },\n    deleteAttr() {\n      let attrs = [];\n      const found = this.tabList.find(_ => _.id === this.currentTab);\n      found.tableColumns.forEach(i => {\n        if (i.isAuto) {\n          attrs.push(i.propertyName);\n        }\n      });\n      return attrs;\n    },\n    async saveHandler(data) {\n      let setBtnsStatus = () => {\n        this.tabList.forEach(ci => {\n          if (ci.id === this.currentTab) {\n            ci.outerActions.forEach(_ => {\n              _.props.disabled = !(\n                _.actionType === \"add\" || _.actionType === \"export\"\n              );\n            });\n          }\n        });\n        this.$refs[this.tableRef][0].setAllRowsUneditable();\n        this.$nextTick(() => {\n          /* to get iview original data to set _ischecked flag */\n          let objData = this.$refs[this.tableRef][0].$refs.table.$refs.tbody\n            .objData;\n          for (let obj in objData) {\n            objData[obj]._isChecked = false;\n            objData[obj]._isDisabled = false;\n          }\n        });\n      };\n      let d = JSON.parse(JSON.stringify(data));\n      let addAry = d.filter(_ => _.isNewAddedRow);\n      let editAry = d.filter(_ => !_.isNewAddedRow);\n      if (addAry.length > 0) {\n        const deleteAttrs = this.deleteAttr();\n        addAry.forEach(_ => {\n          deleteAttrs.forEach(attr => {\n            delete _[attr];\n          });\n          delete _.isRowEditable;\n          delete _.weTableForm;\n          delete _.weTableRowId;\n          delete _.isNewAddedRow;\n          delete _.nextOperations;\n        });\n        let found = this.tabList.find(i => i.id === this.currentTab);\n        let payload = {\n          id: found && found.code,\n          createData: addAry\n        };\n        const { status, message, data } = await createCiDatas(payload);\n        if (status === \"OK\") {\n          this.$Notice.success({\n            title: \"Add data Success\",\n            desc: message\n          });\n          this.isDataChanged = true;\n          setBtnsStatus();\n          this.queryCiData();\n        }\n      }\n      if (editAry.length > 0) {\n        editAry.forEach(_ => {\n          delete _.isRowEditable;\n          delete _.weTableForm;\n          delete _.weTableRowId;\n          delete _.isNewAddedRow;\n          delete _.nextOperations;\n        });\n        let found = this.tabList.find(i => i.id === this.currentTab);\n\n        let payload = {\n          id: found && found.code,\n          updateData: editAry\n        };\n        const { status, message, data } = await updateCiDatas(payload);\n        if (status === \"OK\") {\n          this.$Notice.success({\n            title: \"Update data Success\",\n            desc: message\n          });\n          this.isDataChanged = true;\n          setBtnsStatus();\n          this.queryCiData();\n        }\n      }\n    },\n    async exportHandler() {\n      let exportPayload = {\n        ...this.payload,\n        paging: false\n      };\n      const { status, message, data } = await getArchitectureCiDatas(\n        this.currentTab,\n        this.systemDesignVersion,\n        exportPayload\n      );\n      if (status === \"OK\") {\n        this.$refs[this.tableRef][0].export({\n          filename: \"Ci Data\",\n          data: formatData(data.contents.map(_ => _.data))\n        });\n      }\n    },\n    pageChange(current) {\n      this.tabList.forEach(ci => {\n        if (ci.id === this.currentTab) {\n          ci.pagination.currentPage = current;\n        }\n      });\n      this.queryCiData();\n    },\n    pageSizeChange(size) {\n      this.tabList.forEach(ci => {\n        if (ci.id === this.currentTab) {\n          ci.pagination.pageSize = size;\n        }\n      });\n      this.queryCiData();\n    },\n    async queryCiData() {\n      this.payload.pageable.pageSize = 10;\n      this.payload.pageable.startIndex = 0;\n      this.tabList.forEach(ci => {\n        if (ci.id === this.currentTab) {\n          this.payload.pageable.pageSize = ci.pagination.pageSize;\n          this.payload.pageable.startIndex =\n            (ci.pagination.currentPage - 1) * ci.pagination.pageSize;\n        }\n      });\n\n      let found = this.tabList.find(i => i.code === this.currentTab);\n      const { status, message, data } = await getArchitectureCiDatas(\n        found.codeId,\n        this.systemDesignVersion,\n        this.payload\n      );\n      if (status === \"OK\") {\n        this.tabList.forEach(ci => {\n          if (ci.id === this.currentTab) {\n            ci.tableData = data\n              ? data.contents.map(_ => {\n                  return {\n                    ..._.data,\n                    nextOperations: _.meta.nextOperations || []\n                  };\n                })\n              : [];\n            ci.pagination.total = data ? data.pageInfo.totalRows : 0;\n          }\n        });\n      }\n    },\n    async queryCiAttrs(id) {\n      const { status, message, data } = await getCiTypeAttributes(id);\n      let columns = [];\n      const disabledCol = [\n        \"created_date\",\n        \"updated_date\",\n        \"created_by\",\n        \"updated_by\",\n        \"key_name\",\n        \"guid\"\n      ];\n      if (status === \"OK\") {\n        let columns = [];\n        data.forEach(_ => {\n          const disEditor = disabledCol.find(i => i === _.propertyName);\n          let renderKey = _.propertyName;\n          if (_.status !== \"decommissioned\" && _.status !== \"notCreated\") {\n            const com =\n              _.propertyName === \"invoke_design_sequence\"\n                ? { component: \"sequenceDiagram\" }\n                : { ...components[_.inputType] };\n            columns.push({\n              ..._,\n              title: _.name,\n              key: renderKey,\n              inputKey: _.propertyName,\n              inputType: _.inputType,\n              referenceId: _.referenceId,\n              disEditor: !_.isEditable,\n              disAdded: !_.isEditable,\n              placeholder: _.name,\n              component: \"Input\",\n              ciType: { id: _.referenceId, name: _.name },\n              type: \"text\",\n              ...com\n            });\n          }\n        });\n        this.tabList.forEach(ci => {\n          if (ci.id === this.currentTab) {\n            ci.tableColumns = this.getSelectOptions(columns);\n          }\n        });\n      }\n    },\n    getSelectOptions(columns) {\n      columns.forEach(async _ => {\n        if (_.inputType === \"select\") {\n          const { status, message, data } = await getEnumCodesByCategoryId(\n            0,\n            _.referenceId\n          );\n          _[\"options\"] = data\n            .filter(j => j.status === \"active\")\n            .map(i => {\n              return {\n                label: i.value,\n                value: i.codeId\n              };\n            });\n        }\n      });\n      return columns;\n    },\n    getCurrentData() {\n      this.queryCiAttrs(this.currentTab);\n      this.queryCiData();\n    },\n    async getArchitectureDesignTabs() {\n      const { data, status, message } = await getArchitectureDesignTabs();\n      let allInnerActions = await getExtraInnerActions();\n      if (status === \"OK\") {\n        this.tabList = data.map(_ => {\n          return {\n            ..._,\n            name: _.value,\n            id: _.code,\n            tableData: [],\n            tableColumns: [],\n            outerActions: JSON.parse(JSON.stringify(outerActions)),\n            innerActions: JSON.parse(\n              JSON.stringify(innerActions.concat(allInnerActions))\n            ),\n            pagination: JSON.parse(JSON.stringify(pagination)),\n            ascOptions: {}\n          };\n        });\n      }\n    },\n    onSystemDesignSelect(key) {\n      this.systemDesignVersion = key;\n      if (\n        this.currentTab !== \"architecture-design\" &&\n        this.currentTab !== \"physicalGraph\"\n      ) {\n        this.getCurrentData();\n      }\n    },\n    async getSystemDesigns() {\n      let { status, data, message } = await getSystemDesigns();\n      if (status === \"OK\") {\n        this.systemDesigns = data.contents.map(_ => _.data);\n      }\n    }\n  },\n  created() {\n    this.getArchitectureDesignTabs();\n    this.getSystemDesigns();\n  }\n};\n</script>\n\n<style scoped>\n.ivu-card-head p {\n  height: 30px;\n  line-height: 30px;\n}\n.filter-title {\n  margin-right: 10px;\n}\n#physicalGraph {\n  position: relative;\n  min-height: 300px;\n}\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Row',[_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Row',[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(\"系统设计\")]),_vm._v(\" \"),_c('Select',{staticStyle:{\"width\":\"35%\"},attrs:{\"filterable\":\"\",\"label-in-name\":\"\"},on:{\"on-change\":_vm.onSystemDesignSelect}},_vm._l((_vm.systemDesigns),function(item){return _c('Option',{key:item.guid,attrs:{\"value\":item.guid}},[_vm._v(_vm._s(item.name))])}),1),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin\":\"0 10px\"},on:{\"click\":_vm.onArchChange}},[_vm._v(\"架构变更\")]),_vm._v(\" \"),_c('Button',{on:{\"click\":_vm.querySysTree}},[_vm._v(\"去定版\")]),_vm._v(\" \"),_c('Modal',{attrs:{\"width\":\"500px\",\"title\":\"去定版\"},model:{value:(_vm.fixVersionTreeModal),callback:function ($$v) {_vm.fixVersionTreeModal=$$v},expression:\"fixVersionTreeModal\"}},[_c('div',{staticStyle:{\"max-height\":\"600px\",\"overflow\":\"auto\"}},[_c('Tree',{attrs:{\"data\":_vm.deployTree}})],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{on:{\"click\":_vm.cancelFixVersion}},[_vm._v(\"取消定版\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.onArchFixVersion}},[_vm._v(\"确定定版\")])],1)])],1)],1)],1),_vm._v(\" \"),_c('Card',{staticStyle:{\"margin-top\":\"20px\"}},[_c('div',[_c('Tabs',{attrs:{\"type\":\"card\",\"value\":_vm.currentTab,\"closable\":false},on:{\"on-click\":_vm.handleTabClick}},[_c('TabPane',{attrs:{\"label\":\"应用逻辑图\",\"name\":\"architecture-design\"}},[(_vm.isDataChanged)?_c('Alert',{attrs:{\"show-icon\":\"\",\"closable\":\"\"}},[_vm._v(\"\\n            Data has beed changed, click Reload button to reload graph.\\n            \"),_c('Button',{attrs:{\"slot\":\"desc\"},on:{\"click\":_vm.reloadHandler},slot:\"desc\"},[_vm._v(\"Reload\")])],1):_vm._e(),_vm._v(\" \"),(_vm.spinShow)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}},[_c('Icon',{staticClass:\"spin-icon-load\",attrs:{\"type\":\"ios-loading\",\"size\":\"44\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"加载中...\")])],1):_vm._e(),_vm._v(\" \"),_c('Row',[_c('Col',{attrs:{\"span\":\"18\"}},[_c('div',{staticStyle:{\"padding-right\":\"20px\"}},[_c('div',{staticClass:\"graph-container\",attrs:{\"id\":\"graph\"}})])]),_vm._v(\" \"),(_vm.isShowInvokeSequence)?_c('Col',{staticClass:\"func-wrapper\",attrs:{\"span\":\"6\",\"offset\":\"0\"}},[_c('Collapse',[_c('Panel',{attrs:{\"name\":\"invokeDesignSequence\"}},[_c('b',[_vm._v(\"调用时序设计\")]),_vm._v(\" \"),_c('Form',{ref:\"invokeSequenceForm\",attrs:{\"slot\":\"content\",\"model\":_vm.invokeSequenceForm,\"label-position\":\"left\",\"label-width\":120},slot:\"content\"},[_c('Form-item',{attrs:{\"label\":\"调用时序设计\"}},[_c('Row',[_c('Select',{staticStyle:{\"width\":\"calc(100% - 70px)\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.invokeSequenceForm.selectedInvokeSequence),callback:function ($$v) {_vm.$set(_vm.invokeSequenceForm, \"selectedInvokeSequence\", $$v)},expression:\"invokeSequenceForm.selectedInvokeSequence\"}},_vm._l((_vm.invokeSequenceForm.invokeSequenceData),function(item){return _c('Option',{key:item.data.guid,attrs:{\"value\":item.data.guid}},[_vm._v(_vm._s(item.data.code))])}),1),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-right\":\"10px\",\"float\":\"right\"},on:{\"click\":_vm.onSearchInvokeSquence}},[_vm._v(\"确定\")])],1)],1),_vm._v(\" \"),(_vm.invokeSequenceForm.isShowInvokeSequenceDetial)?_c('Form-item',{attrs:{\"label\":\"调用时序设计序列\"}},[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(_vm.invokeSequenceForm.spliceInvokeSequenceList))])]):_vm._e(),_vm._v(\" \"),(_vm.invokeSequenceForm.isShowInvokeSequenceDetial)?_c('Form-Item',{attrs:{\"label\":\"当前调用\"}},[_c('Row',[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(_vm.invokeSequenceForm.currentInvokeSequenceTag))]),_vm._v(\" \"),_c('span',{staticClass:\"header-buttons-container margin-right\",staticStyle:{\"float\":\"right\"}},[_c('Tooltip',{attrs:{\"content\":\"上一步\",\"placement\":\"top-start\"}},[_c('Button',{attrs:{\"size\":\"small\",\"icon\":\"md-arrow-round-back\"},on:{\"click\":_vm.backInvokeSequence}})],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.invokeSequenceForm.currentNum)+\"/\"+_vm._s(_vm.invokeSequenceForm.totalNum))]),_vm._v(\" \"),_c('Tooltip',{attrs:{\"content\":\"下一步\",\"placement\":\"top-start\"}},[_c('Button',{attrs:{\"size\":\"small\",\"icon\":\"md-arrow-round-forward\"},on:{\"click\":_vm.nextInvokeSequence}})],1)],1)])],1):_vm._e(),_vm._v(\" \"),(_vm.invokeSequenceForm.isShowInvokeSequenceDetial)?_c('Form-Item',[_c('Button',{staticStyle:{\"margin-right\":\"calc(50% + 35px)\",\"float\":\"right\"},on:{\"click\":_vm.closeInvokeSquence}},[_vm._v(\"返回\")])],1):_vm._e()],1)],1)],1)],1):_vm._e()],1)],1),_vm._v(\" \"),_c('TabPane',{attrs:{\"label\":\"物理部署图\",\"name\":\"physicalGraph\"}},[_c('div',{attrs:{\"id\":\"physicalGraph\"}},[(_vm.physicalGraphData.length)?_c('PhysicalGraph',{attrs:{\"graphData\":_vm.physicalGraphData,\"links\":_vm.physicalGraphLinks,\"callback\":_vm.graphCallback}}):_vm._e(),_vm._v(\" \"),(_vm.physicalSpin)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}},[_c('Icon',{staticClass:\"spin-icon-load\",attrs:{\"type\":\"ios-loading\",\"size\":\"44\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"加载中...\")])],1):_vm._e()],1)]),_vm._v(\" \"),_vm._l((_vm.tabList),function(ci){return (!!_vm.systemDesignVersion)?_c('TabPane',{key:ci.id,attrs:{\"name\":ci.id,\"label\":ci.name}},[_c('WeTable',{ref:'table' + ci.id,refInFor:true,attrs:{\"tableData\":ci.tableData,\"tableOuterActions\":ci.outerActions,\"tableInnerActions\":ci.innerActions,\"tableColumns\":ci.tableColumns,\"pagination\":ci.pagination,\"ascOptions\":ci.ascOptions,\"showCheckbox\":_vm.needCheckout,\"tableHeight\":\"650\"},on:{\"actionFun\":_vm.actionFun,\"handleSubmit\":_vm.handleSubmit,\"sortHandler\":_vm.sortHandler,\"getSelectedRows\":_vm.onSelectedRowsChange,\"pageChange\":_vm.pageChange,\"pageSizeChange\":_vm.pageSizeChange}})],1):_vm._e()})],2)],1)])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","function injectStyle (context) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-301ff99e\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./application-architecture.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./application-architecture.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./application-architecture.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-301ff99e\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./application-architecture.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-301ff99e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n"],"sourceRoot":""}