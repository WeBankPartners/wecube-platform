{"version":3,"sources":["webpack:///./src/pages/util/format.js","webpack:///./src/pages/admin/enums.vue?d14f","webpack:///./src/pages/admin/enums.vue?84b4","webpack:///src/pages/admin/enums.vue","webpack:///./src/pages/admin/enums.vue?5fdc","webpack:///./src/pages/admin/enums.vue"],"names":["formatData","data","exportData","map","_","index","weTableForm","forEach","i","value","key_name","content","module","locals","exports","add","default","push","outerActions","innerActions","showCheckbox","tableData","seachFilters","tableColumns","pagination","pageSize","currentPage","total","payload","filters","pageable","startIndex","paging","sorting","asc","field","refResources","ascOptions","seletedRows","props","catId","watch","handler","this","queryData","val","getGroupList","immediate","beforeRouteLeave","$destroy","next","methods","pageChange","current","pageSizeChange","size","sortHandler","order","key","handleSubmit","setNewAddedRow","$refs","table","v","getAsyncOptions","rows","setTableData","disable","actionFun","type","exportHandler","addHandler","editHandler","saveHandler","deleteHandler","cancelHandler","rowCancelHandler","weTableRowId","setAllRowsUneditable","setCheckoutStatus","inputType","emptyRowData","inputKey","Date","getTime","unshift","$nextTick","disabled","actionType","swapRowEditable","$Modal","confirm","title","onOk","onCancel","document","querySelector","click","onSelectedRowsChange","length","checkoutBoxdisable","setActionsParams","routerFlag","created","shift","getEnumNames","getEnumsStatus","mounted","render","_vm","_h","$createElement","_c","_self","ref","attrs","on","staticRenderFns","injectStyle","context","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component"],"mappings":"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","file":"js/chunk-a55d00f6.0eb90d63.js","sourcesContent":["export const formatData = data => {\r\n  let exportData = [];\r\n  exportData = data.map((_, index) => {\r\n    return {\r\n      ..._,\r\n      weTableForm: { ..._ }\r\n    };\r\n  });\r\n\r\n  exportData.forEach(_ => {\r\n    for (let i in _[\"weTableForm\"]) {\r\n      if (\r\n        typeof _[\"weTableForm\"][i] === \"object\" &&\r\n        _[\"weTableForm\"][i] !== null\r\n      ) {\r\n        _[\"weTableForm\"][i] = _[i].value || _[i].key_name;\r\n      }\r\n    }\r\n  });\r\n  return exportData.map(_ => _.weTableForm);\r\n};\r\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-05b79a24\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./enums.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-loader/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"65b59406\", content, true, {});","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","<template>\r\n  <WeTable\r\n    :tableData=\"tableData\"\r\n    :tableOuterActions=\"outerActions\"\r\n    :tableInnerActions=\"innerActions\"\r\n    :tableColumns=\"tableColumns\"\r\n    :pagination=\"pagination\"\r\n    :ascOptions=\"ascOptions\"\r\n    :showCheckbox=\"showCheckbox\"\r\n    :isSortable=\"false\"\r\n    @actionFun=\"actionFun\"\r\n    @getSelectedRows=\"onSelectedRowsChange\"\r\n    @handleSubmit=\"handleSubmit\"\r\n    @sortHandler=\"sortHandler\"\r\n    @pageChange=\"pageChange\"\r\n    @pageSizeChange=\"pageSizeChange\"\r\n    @getGroupList=\"getGroupList\"\r\n    tableHeight=\"650\"\r\n    ref=\"table\"\r\n  ></WeTable>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getAllSystemEnumCodes,\r\n  getSystemCategories,\r\n  getEffectiveStatus,\r\n  createEnumCode,\r\n  updateEnumCode,\r\n  getGroupListByCodeId,\r\n  deleteEnumCodes,\r\n  getAllNonSystemEnumCodes,\r\n  getNonSystemCategories\r\n} from \"@/api/server.js\";\r\nimport { formatData } from \"../util/format.js\";\r\nimport { outerActions, innerActions } from \"@/const/actions.js\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      outerActions,\r\n      innerActions,\r\n      showCheckbox: true,\r\n      tableData: [],\r\n      seachFilters: {},\r\n      tableColumns: [\r\n        {\r\n          title: \"枚举名称\",\r\n          key: \"catName\",\r\n          inputKey: \"catId\",\r\n          searchSeqNo: 1,\r\n          displaySeqNo: 1,\r\n          component: \"WeSelect\",\r\n          onChange: \"getGroupList\",\r\n          disEditor: true, // 枚举名称不可改\r\n          inputType: \"select\",\r\n          placeholder: \"catName\",\r\n          options: []\r\n        },\r\n        {\r\n          title: \"枚举键\",\r\n          key: \"code\",\r\n          inputKey: \"code\",\r\n          searchSeqNo: 2,\r\n          displaySeqNo: 2,\r\n          component: \"Input\",\r\n          inputType: \"text\",\r\n          placeholder: \"code\"\r\n        },\r\n        {\r\n          title: \"枚举值\",\r\n          key: \"value\",\r\n          inputKey: \"value\",\r\n          searchSeqNo: 3,\r\n          displaySeqNo: 3,\r\n          component: \"Input\",\r\n          inputType: \"text\",\r\n          placeholder: \"value\"\r\n        },\r\n        {\r\n          title: \"枚举类型\",\r\n          key: \"catTypeName\",\r\n          inputKey: \"cat.catType.catTypeName\",\r\n          searchSeqNo: 0, // 不可作为搜索条件\r\n          displaySeqNo: 4,\r\n          component: \"Input\",\r\n          disEditor: true, // 枚举类型不可改\r\n          inputType: \"text\",\r\n          placeholder: \"catTypeName\"\r\n        },\r\n        {\r\n          title: \"枚举组\",\r\n          key: \"groupCodeId\",\r\n          inputKey: \"groupCodeId\",\r\n          searchSeqNo: 5,\r\n          displaySeqNo: 5,\r\n          component: \"WeSelect\",\r\n          inputType: \"select\",\r\n          placeholder: \"groupCodeId\",\r\n          optionKey: \"catId\"\r\n        },\r\n        {\r\n          title: \"状态\",\r\n          key: \"status\",\r\n          inputKey: \"status\",\r\n          searchSeqNo: 6,\r\n          displaySeqNo: 6,\r\n          component: \"WeSelect\",\r\n          inputType: \"select\",\r\n          placeholder: \"status\",\r\n          options: []\r\n        }\r\n      ],\r\n      pagination: {\r\n        pageSize: 10,\r\n        currentPage: 1,\r\n        total: 0\r\n      },\r\n      payload: {\r\n        filters: [],\r\n        pageable: {\r\n          pageSize: 10,\r\n          startIndex: 0\r\n        },\r\n        paging: true,\r\n        sorting: {\r\n          asc: true,\r\n          field: \"\"\r\n        },\r\n        refResources: [\"cat\"]\r\n      },\r\n      ascOptions: {},\r\n      seletedRows: []\r\n    };\r\n  },\r\n  props: {\r\n    catId: {}\r\n  },\r\n  watch: {\r\n    catId: {\r\n      handler(val) {\r\n        this.queryData();\r\n        if (val) {\r\n          this.getGroupList(val);\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    this.$destroy();\r\n    next();\r\n  },\r\n  methods: {\r\n    pageChange(current) {\r\n      this.pagination.currentPage = current;\r\n      this.queryData();\r\n    },\r\n    pageSizeChange(size) {\r\n      this.pagination.pageSize = size;\r\n      this.queryData();\r\n    },\r\n    sortHandler(data) {\r\n      this.payload.sorting = {\r\n        asc: data.order === \"asc\",\r\n        field: data.key\r\n      };\r\n      this.queryData();\r\n    },\r\n    handleSubmit(data) {\r\n      this.payload.filters = data;\r\n      this.pagination.currentPage = 1;\r\n      this.queryData();\r\n    },\r\n    setNewAddedRow(index, key, v) {\r\n      this.$refs.table.data[index][key] = v;\r\n    },\r\n    async getGroupList(catId) {\r\n      if (catId) {\r\n        const { data, status, message } = await getGroupListByCodeId(catId);\r\n        let opts = [];\r\n        if (status === \"OK\") {\r\n          opts = data.map(_ => {\r\n            return {\r\n              value: _.codeId,\r\n              label: _.value\r\n            };\r\n          });\r\n        }\r\n        this.$set(this.ascOptions, catId, opts);\r\n      }\r\n      this.$refs.table.form.groupCodeId = \"\";\r\n    },\r\n    getAsyncOptions(rows, disable) {\r\n      rows.forEach(async _ => {\r\n        if (!this.ascOptions[_.catId] && _.catId > 0) {\r\n          this.getGroupList(_.catId);\r\n        }\r\n      });\r\n      this.$refs.table.setTableData(disable);\r\n    },\r\n    async queryData() {\r\n      this.payload.pageable.pageSize = this.pagination.pageSize;\r\n      this.payload.pageable.startIndex =\r\n        (this.pagination.currentPage - 1) * this.pagination.pageSize;\r\n      if (this.catId > -1) {\r\n        const found = this.payload.filters.find(_ => _.name === \"catId\");\r\n        if (found) {\r\n          found.value = this.catId;\r\n        } else {\r\n          this.payload.filters.push({\r\n            name: \"catId\",\r\n            operator: \"eq\",\r\n            value: this.catId\r\n          });\r\n        }\r\n      }\r\n      const { status, message, data } =\r\n        this.$route.name === \"baseData\"\r\n          ? await getAllSystemEnumCodes(this.payload)\r\n          : await getAllNonSystemEnumCodes(this.payload);\r\n      if (status === \"OK\") {\r\n        this.pagination.total = data.pageInfo.totalRows;\r\n        this.tableData = data.contents.map(_ => {\r\n          return {\r\n            ..._,\r\n            ..._.cat,\r\n            catTypeName:\r\n              _.cat.catType.catTypeName === \"sys\"\r\n                ? \"系统枚举\"\r\n                : _.cat.catType.catTypeName === \"common\"\r\n                ? \"公有枚举\"\r\n                : \"私有枚举-\" + _.cat.catType.catTypeName\r\n          };\r\n        });\r\n      }\r\n    },\r\n    async getEnumNames() {\r\n      const { status, message, data } =\r\n        this.$route.name === \"baseData\"\r\n          ? await getSystemCategories()\r\n          : await getNonSystemCategories();\r\n      if (status === \"OK\") {\r\n        this.tableColumns[0].options = data.map(_ => {\r\n          // this.getGroupList(_.catId);\r\n          return {\r\n            value: _.catId,\r\n            label: _.catName\r\n          };\r\n        });\r\n      }\r\n    },\r\n    async getEnumsStatus() {\r\n      const { status, message, data } = await getEffectiveStatus();\r\n      if (status === \"OK\") {\r\n        this.tableColumns[this.tableColumns.length - 1].options = data.map(\r\n          _ => {\r\n            return {\r\n              value: _,\r\n              label: _\r\n            };\r\n          }\r\n        );\r\n      }\r\n    },\r\n\r\n    actionFun(type, data) {\r\n      switch (type) {\r\n        case \"export\":\r\n          this.exportHandler();\r\n          break;\r\n        case \"add\":\r\n          this.addHandler();\r\n          break;\r\n        case \"edit\":\r\n          this.editHandler();\r\n          break;\r\n        case \"save\":\r\n          this.saveHandler(data);\r\n          break;\r\n        case \"delete\":\r\n          this.deleteHandler(data);\r\n          break;\r\n        case \"cancel\":\r\n          this.cancelHandler();\r\n          break;\r\n        case \"innerCancel\":\r\n          this.$refs.table.rowCancelHandler(data.weTableRowId);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    cancelHandler() {\r\n      this.$refs.table.setAllRowsUneditable();\r\n      this.$refs.table.setCheckoutStatus();\r\n      this.outerActions &&\r\n        this.outerActions.forEach(_ => {\r\n          _.props.disabled = !(\r\n            _.actionType === \"add\" ||\r\n            _.actionType === \"export\" ||\r\n            _.actionType === \"cancel\"\r\n          );\r\n        });\r\n    },\r\n    addHandler() {\r\n      let emptyRowData = {};\r\n      this.tableColumns.forEach(_ => {\r\n        if (_.inputType === \"multiSelect\" || _.inputType === \"multiRef\") {\r\n          emptyRowData[_.inputKey] = [];\r\n        } else {\r\n          emptyRowData[_.inputKey] = \"\";\r\n        }\r\n      });\r\n      emptyRowData[\"isRowEditable\"] = true;\r\n      emptyRowData[\"isNewAddedRow\"] = true;\r\n      emptyRowData[\"weTableRowId\"] = new Date().getTime();\r\n      emptyRowData[\"catId\"] = this.catId ? this.catId : \"\";\r\n      this.tableData.unshift(emptyRowData);\r\n      this.$nextTick(() => {\r\n        this.$refs.table.pushNewAddedRowToSelections();\r\n        this.$refs.table.setCheckoutStatus(true);\r\n      });\r\n      this.outerActions.forEach(_ => {\r\n        _.props.disabled = _.actionType === \"add\";\r\n      });\r\n    },\r\n    editHandler() {\r\n      this.$refs.table.swapRowEditable(true);\r\n      this.outerActions.forEach(_ => {\r\n        if (_.actionType === \"save\") {\r\n          _.props.disabled = false;\r\n        }\r\n      });\r\n      this.$nextTick(() => {\r\n        this.$refs.table.setCheckoutStatus(true);\r\n      });\r\n    },\r\n    deleteHandler(deleteData) {\r\n      this.$Modal.confirm({\r\n        title: \"确认删除？\",\r\n        \"z-index\": 1000000,\r\n        onOk: async () => {\r\n          const payload = deleteData.map(_ => _.codeId);\r\n          const { status, message, data } = await deleteEnumCodes(payload);\r\n          if (status === \"OK\") {\r\n            this.$Notice.success({\r\n              title: \"Delete Enum Success\",\r\n              desc: message\r\n            });\r\n            this.outerActions.forEach(_ => {\r\n              _.props.disabled =\r\n                _.actionType === \"save\" ||\r\n                _.actionType === \"edit\" ||\r\n                _.actionType === \"delete\";\r\n            });\r\n            this.queryData();\r\n          }\r\n        },\r\n        onCancel: () => {}\r\n      });\r\n      document.querySelector(\".ivu-modal-mask\").click();\r\n    },\r\n    async saveHandler(data) {\r\n      let setBtnsStatus = () => {\r\n        this.outerActions.forEach(_ => {\r\n          _.props.disabled = !(\r\n            _.actionType === \"add\" || _.actionType === \"export\"\r\n          );\r\n        });\r\n        this.$refs.table.setAllRowsUneditable();\r\n        this.$nextTick(() => {\r\n          /* to get iview original data to set _ischecked flag */\r\n          let objData = this.$refs.table.$refs.table.$refs.tbody.objData;\r\n          for (let obj in objData) {\r\n            objData[obj]._isChecked = false;\r\n            objData[obj]._isDisabled = false;\r\n          }\r\n        });\r\n      };\r\n      let d = JSON.parse(JSON.stringify(data));\r\n      let addObj = d.find(_ => _.isNewAddedRow);\r\n      let editAry = d.filter(_ => !_.isNewAddedRow);\r\n      if (addObj) {\r\n        let payload = {\r\n          callbackId: 1,\r\n          catId: addObj.catId || this.catId,\r\n          code: addObj.code,\r\n          status: addObj.status,\r\n          value: addObj.value,\r\n          groupCodeId: addObj.groupCodeId\r\n        };\r\n        const { status, message, data } = await createEnumCode(payload);\r\n        if (status === \"OK\") {\r\n          this.$Notice.success({\r\n            title: \"Add Enum Success\",\r\n            desc: message\r\n          });\r\n          setBtnsStatus();\r\n          this.queryData();\r\n        }\r\n      }\r\n      if (editAry.length > 0) {\r\n        let payload = editAry.map(_ => {\r\n          return {\r\n            callbackId: _.weTableRowId,\r\n            catId: _.catId,\r\n            code: _.code,\r\n            codeId: _.codeId,\r\n            groupCodeId: _.groupCodeId,\r\n            status: _.status,\r\n            value: _.value\r\n          };\r\n        });\r\n        const { status, message, data } = await updateEnumCode(payload);\r\n        if (status === \"OK\") {\r\n          this.$Notice.success({\r\n            title: \"Update Enum Success\",\r\n            desc: message\r\n          });\r\n          setBtnsStatus();\r\n          this.queryData();\r\n        }\r\n      }\r\n    },\r\n    onSelectedRowsChange(rows, checkoutBoxdisable) {\r\n      if (rows.length > 0) {\r\n        this.outerActions.forEach(_ => {\r\n          _.props.disabled = _.actionType === \"add\";\r\n        });\r\n      } else {\r\n        this.outerActions.forEach(_ => {\r\n          _.props.disabled = !(\r\n            _.actionType === \"add\" ||\r\n            _.actionType === \"export\" ||\r\n            _.actionType === \"cancel\"\r\n          );\r\n        });\r\n      }\r\n      this.seletedRows = rows;\r\n      this.getAsyncOptions(rows, checkoutBoxdisable);\r\n    },\r\n    async exportHandler() {\r\n      const { status, message, data } =\r\n        this.$route.name === \"baseData\"\r\n          ? await getAllSystemEnumCodes({ ...this.payload, paging: false })\r\n          : await getAllNonSystemEnumCodes({ ...this.payload, paging: false });\r\n\r\n      if (status === \"OK\") {\r\n        this.$refs.table.export({\r\n          filename:\r\n            this.$route.name === \"baseData\" ? \"Basic Enums Data\" : \"Enums Data\",\r\n          data: data.contents.map(_ => {\r\n            const formatValue = _.value ? _.value.replace(/,/g, \";\") : \"\";\r\n            return {\r\n              ..._,\r\n              value: formatValue,\r\n              groupCodeId: _.groupCodeId ? _.groupCodeId.value : \"\",\r\n              catName: _.cat.catName\r\n            };\r\n          })\r\n        });\r\n      }\r\n    },\r\n    setActionsParams() {\r\n      const routerFlag = this.$route.name === \"enumEnquiry\";\r\n      this.outerActions = routerFlag ? null : outerActions;\r\n      this.innerActions = routerFlag ? null : innerActions;\r\n      this.showCheckbox = routerFlag ? false : true;\r\n    }\r\n  },\r\n  created() {\r\n    if (this.catId) {\r\n      this.tableColumns.shift();\r\n    } else {\r\n      this.setActionsParams();\r\n      this.getEnumNames();\r\n    }\r\n    this.queryData();\r\n    this.getEnumsStatus();\r\n  },\r\n  mounted() {\r\n    this.cancelHandler();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('WeTable',{ref:\"table\",attrs:{\"tableData\":_vm.tableData,\"tableOuterActions\":_vm.outerActions,\"tableInnerActions\":_vm.innerActions,\"tableColumns\":_vm.tableColumns,\"pagination\":_vm.pagination,\"ascOptions\":_vm.ascOptions,\"showCheckbox\":_vm.showCheckbox,\"isSortable\":false,\"tableHeight\":\"650\"},on:{\"actionFun\":_vm.actionFun,\"getSelectedRows\":_vm.onSelectedRowsChange,\"handleSubmit\":_vm.handleSubmit,\"sortHandler\":_vm.sortHandler,\"pageChange\":_vm.pageChange,\"pageSizeChange\":_vm.pageSizeChange,\"getGroupList\":_vm.getGroupList}})}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","function injectStyle (context) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-05b79a24\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!sass-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./enums.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./enums.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./enums.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-05b79a24\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./enums.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-05b79a24\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n"],"sourceRoot":""}