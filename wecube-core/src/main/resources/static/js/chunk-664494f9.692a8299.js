(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-664494f9"],{"9d67":function(e,t,r){var n=r("d89e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("2fb2").default;a("349371d5",n,!0,{})},d89e:function(e,t,r){t=e.exports=r("2350")(!1),t.push([e.i,".ivu-tag[data-v-62d6cfa0]{display:block;border:1px dashed #515a61!important}.ivu-tag .ivu-tag-text[data-v-62d6cfa0]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.role-item .ivu-tag[data-v-62d6cfa0]{display:inline-block;width:65%}.data-permissions[data-v-62d6cfa0]{width:100%;height:30px;border:1px dashed gray;padding-left:5px;padding-right:5px;border-radius:5px;margin-bottom:5px}.ciTypes-options[data-v-62d6cfa0]{float:right;line-height:30px}.ciTypes[data-v-62d6cfa0]{float:left;line-height:30px}.ciTypes-options .ivu-checkbox-indeterminate .ivu-checkbox-inner[data-v-62d6cfa0]{background-color:#4ee643}.ciTypes-options .ivu-checkbox-disabled.ivu-checkbox-checked .ivu-checkbox-inner[data-v-62d6cfa0]{background-color:#2d8cf0}",""])},fc60:function(e,t,r){"use strict";r.r(t);r("8e6e"),r("456d"),r("7f7f");var n=r("75fc"),a=r("bd86"),s=(r("7514"),r("ac6a"),r("96cf"),r("3b8d")),i=r("aa22"),c=r("2ce2");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(r,!0).forEach(function(t){Object(a["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l={data:function(){return{users:[],roles:[],addedUser:{},addedRole:{},addedRoleValue:"",transferTitles:[this.$t("unselected_user"),this.$t("selected_user")],transferStyle:{width:"300px"},usersKeyBySelectedRole:[],allUsersForTransfer:[],addUserModalVisible:!1,addRoleModalVisible:!1,userManageModal:!1,originMenus:[],menus:[]}},methods:{handleMenuTreeCheck:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.filter(function(e){return e.category}).map(function(e){return e.code}),e.next=3,Object(i["yb"])(this.currentRoleId,n);case 3:a=e.sent,s=a.status,c=a.message,a.data,"OK"===s&&this.$Notice.success({title:"success",desc:c}),this.handleRoleClick(!0,this.currentRoleId);case 9:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),getAllMenus:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["l"])();case 2:t=e.sent,r=t.status,t.message,n=t.data,"OK"===r&&(this.originMenus=n),this.menus=this.menusResponseHandeler(this.originMenus);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),menusPermissionSelected:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.forEach(function(e){e.children.forEach(function(e){var r=t.find(function(t){return e.code===t.code});e.checked=!!r}),e.indeterminate=!1,e.checked=!1})},menusResponseHandeler:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];return e.forEach(function(e){if(!e.category){var a=c["a"].find(function(t){return t.code===e.code});n.push(d({},e,{title:"SYSTEM"===e.source?"zh-CN"===t.$lang?a.cnName:a.enName:e.displayName,id:e.id,expand:!0,checked:!1,children:[],disabled:r}))}}),e.forEach(function(e){if(e.category){var a=c["a"].find(function(t){return t.code===e.code});n.forEach(function(n){e.category===n.id&&n.children.push(d({},e,{title:"SYSTEM"===e.source?"zh-CN"===t.$lang?a.cnName:a.enName:e.displayName,id:e.id,expand:!0,checked:!1,disabled:r}))})}}),n},renderUserNameForTransfer:function(e){return e.label},getAllUsers:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["Z"])();case 2:t=e.sent,r=t.status,n=t.data,t.message,"OK"===r&&(this.users=n.map(function(e){return d({},e,{checked:!1,color:"#5cadff"})}));case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getAllRoles:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["T"])();case 2:t=e.sent,r=t.status,n=t.data,t.message,"OK"===r&&(this.roles=n.map(function(e){return d({},e,{checked:!1,color:"success"})}));case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleUserClick:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var a,s,c,o,d,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.currentRoleId=0,this.users.forEach(function(e){e.checked=!1,r===e.username&&(e.checked=t)}),e.next=4,Object(i["C"])(r);case 4:return a=e.sent,"OK"===a.status&&(c=(s=[]).concat.apply(s,Object(n["a"])(a.data.map(function(e){return e.menuList}))),this.menusPermissionSelected(this.menus,c)),e.next=8,Object(i["U"])(r);case 8:o=e.sent,d=o.status,l=o.data,o.message,"OK"===d&&this.roles.forEach(function(e){e.checked=!1;var r=l.find(function(t){return t.id===e.id});r&&(e.checked=t)});case 13:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),handleRoleClick:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.currentRoleId=r,this.roles.forEach(function(e){e.checked=!1,r===e.id&&(e.checked=t)}),this.menus=this.menusResponseHandeler(this.originMenus,!1),e.next=5,Object(i["B"])(r);case 5:return n=e.sent,"OK"===n.status&&this.menusPermissionSelected(this.menus,n.data.menuList),e.next=9,Object(i["ab"])(r);case 9:a=e.sent,s=a.status,c=a.data,a.message,"OK"===s&&this.users.forEach(function(e){e.checked=!1;var r=c.find(function(t){return t.username===e.username});r&&(e.checked=t)});case 14:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),handleUserTransferChange:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,r,n){var a,s,c,o,d,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("right"!==r){e.next=10;break}return e.next=3,Object(i["bb"])(n,this.selectedRole);case 3:a=e.sent,s=a.status,a.data,c=a.message,"OK"===s&&(this.$Notice.success({title:"success",desc:c}),this.usersKeyBySelectedRole=t),e.next=17;break;case 10:return e.next=12,Object(i["sb"])(n,this.selectedRole);case 12:o=e.sent,d=o.status,o.data,l=o.message,"OK"===d&&(this.$Notice.success({title:"success",desc:l}),this.usersKeyBySelectedRole=t);case 17:case"end":return e.stop()}},e,this)}));function t(t,r,n){return e.apply(this,arguments)}return t}(),confirmUser:function(){0!==this.currentRoleId&&this.handleRoleClick(!0,this.currentRoleId)},openUserManageModal:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.usersKeyBySelectedRole=[],this.allUsersForTransfer=[],this.selectedRole=t,e.next=5,Object(i["ab"])(t);case 5:r=e.sent,n=r.status,a=r.data,r.message,"OK"===n&&(this.usersKeyBySelectedRole=a.map(function(e){return e.id})),this.allUsersForTransfer=this.users.map(function(e){return{key:e.id,username:e.username,label:e.username||""}}),this.userManageModal=!0;case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.addedUser.username){e.next=3;break}return this.$Notice.warning({title:"Warning",desc:this.$t("username_cannot_empty")}),e.abrupt("return");case 3:if(this.addedUser.password){e.next=6;break}return this.$Notice.warning({title:"Warning",desc:this.$t("password_cannot_empty")}),e.abrupt("return");case 6:return e.next=8,Object(i["Bb"])(this.addedUser);case 8:t=e.sent,r=t.status,t.data,n=t.message,"OK"===r&&(this.$Notice.success({title:"success",desc:n}),this.addedUser={},this.getAllUsers());case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addRole:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.addedRole.name){e.next=3;break}return this.$Notice.warning({title:"Warning",desc:this.$t("role_cannot_empty")}),e.abrupt("return");case 3:return e.next=5,Object(i["tb"])(this.addedRole);case 5:t=e.sent,r=t.status,t.data,n=t.message,"OK"===r&&(this.$Notice.success({title:"success",desc:n}),this.getAllRoles());case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openAddRoleModal:function(){this.addRoleModalVisible=!0},openAddUserModal:function(){this.addUserModalVisible=!0},cancel:function(){}},created:function(){this.getAllUsers(),this.getAllRoles(),this.getAllMenus()}},u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Row",[r("Col",{attrs:{span:"7"}},[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n          "+e._s(e.$t("user"))+"\n          "),r("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small"},on:{click:e.openAddUserModal}},[e._v(e._s(e.$t("add_user")))])],1),e._v(" "),e._l(e.users,function(t){return r("Tag",{key:t.id,attrs:{name:t.username,color:t.color,checked:t.checked,checkable:"",fade:!1},on:{"on-change":e.handleUserClick}},[r("span",{attrs:{title:" "+t.username+" "}},[e._v("\n            "+e._s(" "+t.username+" ")+"\n          ")])])})],2)],1),e._v(" "),r("Col",{attrs:{span:"7",offset:"1"}},[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n          "+e._s(e.$t("role"))+"\n          "),r("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small"},on:{click:e.openAddRoleModal}},[e._v(e._s(e.$t("add_role")))])],1),e._v(" "),e._l(e.roles,function(t){return r("div",{key:t.id,staticClass:"role-item"},[r("Tag",{attrs:{name:t.id,color:t.color,checked:t.checked,checkable:"",fade:!1},on:{"on-change":e.handleRoleClick}},[r("span",{attrs:{title:t.displayName}},[e._v(e._s(t.displayName))])]),e._v(" "),r("Button",{attrs:{icon:"ios-build",type:"dashed",size:"small"},on:{click:function(r){return e.openUserManageModal(t.id)}}},[e._v(e._s(e.$t("user")))])],1)})],2)],1),e._v(" "),r("Col",{attrs:{span:"7",offset:"1"}},[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("menus")))]),e._v(" "),r("Tree",{attrs:{data:e.menus,"show-checkbox":""},on:{"on-check-change":e.handleMenuTreeCheck}})],1)],1)],1),e._v(" "),r("Modal",{attrs:{title:e.$t("add_user")},on:{"on-ok":e.addUser,"on-cancel":e.cancel},model:{value:e.addUserModalVisible,callback:function(t){e.addUserModalVisible=t},expression:"addUserModalVisible"}},[r("Form",{ref:"addedUserForm",staticClass:"validation-form",attrs:{model:e.addedUser,"label-position":"left","label-width":100}},[r("FormItem",{attrs:{label:e.$t("username"),prop:"username"}},[r("Input",{model:{value:e.addedUser.username,callback:function(t){e.$set(e.addedUser,"username",t)},expression:"addedUser.username"}})],1),e._v(" "),r("FormItem",{attrs:{label:e.$t("password"),prop:"fullName"}},[r("Input",{attrs:{type:"password"},model:{value:e.addedUser.password,callback:function(t){e.$set(e.addedUser,"password",t)},expression:"addedUser.password"}})],1)],1)],1),e._v(" "),r("Modal",{attrs:{title:e.$t("add_role")},on:{"on-ok":e.addRole,"on-cancel":e.cancel},model:{value:e.addRoleModalVisible,callback:function(t){e.addRoleModalVisible=t},expression:"addRoleModalVisible"}},[r("Form",{staticClass:"validation-form",attrs:{model:e.addedRole,"label-position":"left","label-width":100}},[r("FormItem",{attrs:{label:e.$t("role")}},[r("Input",{attrs:{placeholder:e.$t("please_input")},model:{value:e.addedRole.name,callback:function(t){e.$set(e.addedRole,"name",t)},expression:"addedRole.name"}})],1),e._v(" "),r("FormItem",{attrs:{label:e.$t("display_name")}},[r("Input",{attrs:{placeholder:e.$t("please_input")},model:{value:e.addedRole.displayName,callback:function(t){e.$set(e.addedRole,"displayName",t)},expression:"addedRole.displayName"}})],1)],1)],1),e._v(" "),r("Modal",{attrs:{width:"700",title:e.$t("edit_user")},on:{"on-ok":e.confirmUser,"on-cancel":e.confirmUser},model:{value:e.userManageModal,callback:function(t){e.userManageModal=t},expression:"userManageModal"}},[r("Transfer",{attrs:{titles:e.transferTitles,"list-style":e.transferStyle,data:e.allUsersForTransfer,"target-keys":e.usersKeyBySelectedRole,"render-format":e.renderUserNameForTransfer,filterable:""},on:{"on-change":e.handleUserTransferChange}})],1)],1)},h=[],p=r("2455");function f(e){r("9d67")}var m=!1,b=f,v="data-v-62d6cfa0",g=null,k=Object(p["a"])(l,u,h,m,b,v,g);t["default"]=k.exports}}]);
//# sourceMappingURL=chunk-664494f9.692a8299.js.map